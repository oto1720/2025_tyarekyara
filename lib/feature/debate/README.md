# ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆæ©Ÿèƒ½ ä»•æ§˜æ›¸

## ğŸ“‹ ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [æ©Ÿèƒ½ä¸€è¦§](#æ©Ÿèƒ½ä¸€è¦§)
3. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
4. [ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«](#ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«)
5. [ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆãƒ•ãƒ­ãƒ¼](#ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆãƒ•ãƒ­ãƒ¼)
6. [AIåˆ¤å®šã‚·ã‚¹ãƒ†ãƒ ](#aiåˆ¤å®šã‚·ã‚¹ãƒ†ãƒ )
7. [ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³](#ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³)
8. [Firestoreã‚¹ã‚­ãƒ¼ãƒ](#firestoreã‚¹ã‚­ãƒ¼ãƒ)
9. [Cloud Functions](#cloud-functions)
10. [ç”»é¢ä¸€è¦§](#ç”»é¢ä¸€è¦§)
11. [é–‹ç™ºã‚¬ã‚¤ãƒ‰](#é–‹ç™ºã‚¬ã‚¤ãƒ‰)

---

## æ¦‚è¦

ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆæ©Ÿèƒ½ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç‰¹å®šã®ãƒˆãƒ”ãƒƒã‚¯ã«ã¤ã„ã¦è³›æˆãƒ»åå¯¾ã«åˆ†ã‹ã‚Œã¦è­°è«–ã‚’è¡Œã„ã€AIã«ã‚ˆã‚‹å…¬å¹³ãªåˆ¤å®šã‚’å—ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹æ©Ÿèƒ½ã§ã™ã€‚

### ä¸»ãªç‰¹å¾´

- ğŸ“… **å®šæœŸé–‹å‚¬**: é€±2-3å›ã®å®šæœŸã‚¤ãƒ™ãƒ³ãƒˆ
- ğŸ¤– **AIåˆ¤å®š**: Gemini 1.5 Flashã«ã‚ˆã‚‹5é …ç›®è©•ä¾¡
- ğŸ® **ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³**: ãƒã‚¤ãƒ³ãƒˆã€ãƒ¬ãƒ™ãƒ«ã€ãƒãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ 
- ğŸ‘¥ **ãƒãƒ¼ãƒ åˆ¶**: 2å¯¾2ã®ãƒãƒ¼ãƒ æˆ¦
- â±ï¸ **æ™‚é–“åˆ¶é™**: 5åˆ†/10åˆ†/15åˆ†ã®é¸æŠå¼
- ğŸ“Š **çµ±è¨ˆæ©Ÿèƒ½**: è©³ç´°ãªæˆç¸¾ãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤º

---

## æ©Ÿèƒ½ä¸€è¦§

### 1. ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†
- âœ… ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§è¡¨ç¤ºï¼ˆé–‹å‚¬äºˆå®šãƒ»çµ‚äº†æ¸ˆã¿ï¼‰
- âœ… ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ç¢ºèª
- âœ… ã‚¨ãƒ³ãƒˆãƒªãƒ¼ç™»éŒ²

### 2. ãƒãƒƒãƒãƒ³ã‚°
- âœ… è¨­å®šé¸æŠï¼ˆæ™‚é–“ã€å½¢å¼ã€ç«‹å ´ï¼‰
- âœ… è‡ªå‹•ãƒãƒƒãƒãƒ³ã‚°
- âœ… ãƒãƒƒãƒãƒ³ã‚°æˆåŠŸé€šçŸ¥
- âœ… ãƒãƒƒãƒè©³ç´°è¡¨ç¤º

### 3. ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆå®Ÿè¡Œ
- âœ… 12ãƒ•ã‚§ãƒ¼ã‚ºã®é€²è¡Œç®¡ç†
- âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆï¼ˆå…¬é–‹ãƒ»ãƒãƒ¼ãƒ å†…ï¼‰
- âœ… ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤º
- âœ… ãƒ•ã‚§ãƒ¼ã‚ºã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼

### 4. AIåˆ¤å®š
- âœ… è‡ªå‹•åˆ¤å®šï¼ˆãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆçµ‚äº†æ™‚ï¼‰
- âœ… 5é …ç›®è©•ä¾¡ï¼ˆè«–ç†æ€§ã€æ ¹æ‹ ã€åè«–åŠ›ã€èª¬å¾—åŠ›ã€ãƒãƒŠãƒ¼ï¼‰
- âœ… MVPé¸å‡º
- âœ… ãƒãƒ¼ãƒ åˆ¥ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

### 5. ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³
- âœ… ãƒã‚¤ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ 
- âœ… ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—
- âœ… ãƒãƒƒã‚¸ç²å¾—
- âœ… ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆãƒã‚¤ãƒ³ãƒˆãƒ»å‹ç‡ãƒ»å‚åŠ æ•°ï¼‰
- âœ… çµ±è¨ˆè¡¨ç¤º

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Flutter App (Dart)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Presentation Layer                                      â”‚
â”‚  â”œâ”€ Pages (UI Screens)                                  â”‚
â”‚  â”œâ”€ Widgets (Reusable Components)                       â”‚
â”‚  â””â”€ Providers (Riverpod State Management)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Domain Layer                                            â”‚
â”‚  â”œâ”€ Models (Freezed Data Classes)                       â”‚
â”‚  â””â”€ Repositories (Data Access)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Firebase Services                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Firestore (Database)                                    â”‚
â”‚  â”œâ”€ debate_events                                       â”‚
â”‚  â”œâ”€ debate_matches                                      â”‚
â”‚  â”œâ”€ debate_rooms                                        â”‚
â”‚  â”œâ”€ debate_judgments                                    â”‚
â”‚  â”œâ”€ user_debate_stats                                   â”‚
â”‚  â””â”€ debate_rankings                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Cloud Functions (Node.js/TypeScript)                   â”‚
â”‚  â”œâ”€ onDebateComplete (Firestore Trigger)               â”‚
â”‚  â””â”€ manualJudgeDebate (HTTPS Callable)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Vertex AI (Gemini 1.5 Flash)                           â”‚
â”‚  â””â”€ AI Judgment Service                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

**ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰:**
- Flutter 3.x
- Riverpod (çŠ¶æ…‹ç®¡ç†)
- Freezed (ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãƒ¢ãƒ‡ãƒ«)
- fl_chart (ã‚°ãƒ©ãƒ•è¡¨ç¤º)
- go_router (ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

**ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰:**
- Firebase Firestore (ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹)
- Cloud Functions v2 (ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹)
- Vertex AI API (AIåˆ¤å®š)

---

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### ä¸»è¦ãƒ¢ãƒ‡ãƒ«

#### 1. DebateEvent (ã‚¤ãƒ™ãƒ³ãƒˆ)
```dart
class DebateEvent {
  String id;
  String topic;              // ãƒˆãƒ”ãƒƒã‚¯
  String description;        // èª¬æ˜
  DateTime scheduledAt;      // é–‹å‚¬æ—¥æ™‚
  EventStatus status;        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  List<DebateDuration> allowedDurations;  // è¨±å¯ã•ã‚ŒãŸæ™‚é–“
  List<DebateFormat> allowedFormats;      // è¨±å¯ã•ã‚ŒãŸå½¢å¼
}
```

#### 2. DebateMatch (ãƒãƒƒãƒ)
```dart
class DebateMatch {
  String id;
  String eventId;
  DebateTeam proTeam;        // è³›æˆãƒãƒ¼ãƒ 
  DebateTeam conTeam;        // åå¯¾ãƒãƒ¼ãƒ 
  DebateDuration duration;   // åˆ¶é™æ™‚é–“
  DebateFormat format;       // å½¢å¼
  MatchStatus status;        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
}
```

#### 3. DebateRoom (ãƒ«ãƒ¼ãƒ )
```dart
class DebateRoom {
  String id;
  String matchId;
  DebatePhase currentPhase;  // ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚º
  DateTime phaseStartedAt;   // ãƒ•ã‚§ãƒ¼ã‚ºé–‹å§‹æ™‚åˆ»
  RoomStatus status;         // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
}
```

#### 4. JudgmentResult (åˆ¤å®šçµæœ)
```dart
class JudgmentResult {
  String id;
  TeamScore proTeamScore;    // è³›æˆãƒãƒ¼ãƒ ã‚¹ã‚³ã‚¢
  TeamScore conTeamScore;    // åå¯¾ãƒãƒ¼ãƒ ã‚¹ã‚³ã‚¢
  DebateStance? winningSide; // å‹åˆ©ãƒãƒ¼ãƒ  (null=å¼•ãåˆ†ã‘)
  String? mvpUserId;         // MVP
  String overallComment;     // å…¨ä½“è¬›è©•
  String proTeamComment;     // è³›æˆãƒãƒ¼ãƒ ã‚³ãƒ¡ãƒ³ãƒˆ
  String conTeamComment;     // åå¯¾ãƒãƒ¼ãƒ ã‚³ãƒ¡ãƒ³ãƒˆ
}

class TeamScore {
  int logicScore;           // è«–ç†æ€§ (0-10)
  int evidenceScore;        // æ ¹æ‹  (0-10)
  int rebuttalScore;        // åè«–åŠ› (0-10)
  int persuasivenessScore;  // èª¬å¾—åŠ› (0-10)
  int mannerScore;          // ãƒãƒŠãƒ¼ (0-10)
  int totalScore;           // åˆè¨ˆ (0-50)
}
```

#### 5. UserDebateStats (çµ±è¨ˆ)
```dart
class UserDebateStats {
  String userId;
  int totalDebates;          // ç·å‚åŠ æ•°
  int wins;                  // å‹åˆ©æ•°
  int losses;                // æ•—åŒ—æ•°
  int draws;                 // å¼•ãåˆ†ã‘æ•°
  int totalPoints;           // ç·ãƒã‚¤ãƒ³ãƒˆ
  int level;                 // ãƒ¬ãƒ™ãƒ«
  int currentLevelPoints;    // ç¾åœ¨ãƒ¬ãƒ™ãƒ«ã®ãƒã‚¤ãƒ³ãƒˆ
  int pointsToNextLevel;     // æ¬¡ãƒ¬ãƒ™ãƒ«ã¾ã§ã®ãƒã‚¤ãƒ³ãƒˆ
  int mvpCount;              // MVPç²å¾—æ•°
  List<EarnedBadge> earnedBadges;  // ç²å¾—ãƒãƒƒã‚¸
}
```

---

## ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆãƒ•ãƒ­ãƒ¼

### ãƒ•ã‚§ãƒ¼ã‚ºæ§‹æˆï¼ˆ12ãƒ•ã‚§ãƒ¼ã‚ºï¼‰

| ãƒ•ã‚§ãƒ¼ã‚º | åç§° | æ™‚é–“ | èª¬æ˜ |
|---------|------|------|------|
| 1 | æº–å‚™ | 1åˆ† | ä½œæˆ¦ä¼šè­° |
| 2 | ç«‹è«–ï¼ˆè³›æˆï¼‰ | 2åˆ† | è³›æˆå´ã®ä¸»å¼µ |
| 3 | ç«‹è«–ï¼ˆåå¯¾ï¼‰ | 2åˆ† | åå¯¾å´ã®ä¸»å¼µ |
| 4 | è³ªç–‘å¿œç­”æº–å‚™ï¼ˆè³›æˆï¼‰ | 30ç§’ | è³ªå•æº–å‚™ |
| 5 | è³ªç–‘å¿œç­”ï¼ˆè³›æˆã¸ï¼‰ | 1åˆ† | åå¯¾â†’è³›æˆã¸ã®è³ªå• |
| 6 | è³ªç–‘å¿œç­”æº–å‚™ï¼ˆåå¯¾ï¼‰ | 30ç§’ | è³ªå•æº–å‚™ |
| 7 | è³ªç–‘å¿œç­”ï¼ˆåå¯¾ã¸ï¼‰ | 1åˆ† | è³›æˆâ†’åå¯¾ã¸ã®è³ªå• |
| 8 | åè«–æº–å‚™ï¼ˆè³›æˆï¼‰ | 30ç§’ | åè«–æº–å‚™ |
| 9 | åè«–ï¼ˆè³›æˆï¼‰ | 1.5åˆ† | è³›æˆå´ã®åè«– |
| 10 | åè«–æº–å‚™ï¼ˆåå¯¾ï¼‰ | 30ç§’ | åè«–æº–å‚™ |
| 11 | åè«–ï¼ˆåå¯¾ï¼‰ | 1.5åˆ† | åå¯¾å´ã®åè«– |
| 12 | æœ€çµ‚ä¸»å¼µ | å„1åˆ† | ä¸¡ãƒãƒ¼ãƒ ã®ç·æ‹¬ |

### çŠ¶æ…‹é·ç§»

```
ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ â†’ ã‚¨ãƒ³ãƒˆãƒªãƒ¼å—ä»˜ â†’ ãƒãƒƒãƒãƒ³ã‚°
    â†“
ãƒãƒƒãƒæˆç«‹ â†’ ãƒ«ãƒ¼ãƒ ä½œæˆ â†’ ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆå®Ÿè¡Œ
    â†“
å®Œäº† â†’ AIåˆ¤å®šä¸­ â†’ åˆ¤å®šå®Œäº† â†’ çµæœè¡¨ç¤º
    â†“
çµ±è¨ˆæ›´æ–° â†’ ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ›´æ–°
```

---

## AIåˆ¤å®šã‚·ã‚¹ãƒ†ãƒ 

### è©•ä¾¡åŸºæº–ï¼ˆå„10ç‚¹æº€ç‚¹ï¼‰

1. **è«–ç†æ€§** (Logic)
   - ä¸»å¼µã®è«–ç†çš„æ•´åˆæ€§
   - å› æœé–¢ä¿‚ã®æ˜ç¢ºã•

2. **æ ¹æ‹ ãƒ»è¨¼æ‹ ** (Evidence)
   - å…·ä½“ä¾‹ã‚„ãƒ‡ãƒ¼ã‚¿ã®æç¤º
   - è¨¼æ‹ ã®ä¿¡é ¼æ€§

3. **åè«–åŠ›** (Rebuttal)
   - ç›¸æ‰‹ã®ä¸»å¼µã¸ã®åŠ¹æœçš„ãªåè«–
   - å¯¾å¿œã®çš„ç¢ºã•

4. **èª¬å¾—åŠ›** (Persuasiveness)
   - è¡¨ç¾ã®æ˜ç¢ºã•
   - è´è¡†ã‚’ç´å¾—ã•ã›ã‚‹åŠ›

5. **ãƒãƒŠãƒ¼** (Manner)
   - ç¤¼å„€æ­£ã—ã•
   - å†·é™ã•

### AIåˆ¤å®šãƒ—ãƒ­ã‚»ã‚¹

```typescript
1. ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆçµ‚äº†æ™‚ã€Firestoreãƒˆãƒªã‚¬ãƒ¼ç™ºå‹•
   â†“
2. å…¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—ãƒ»ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥ã«åˆ†é¡
   â†“
3. Gemini 1.5 Flashã¸ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé€ä¿¡
   â†“
4. JSONå½¢å¼ã§5é …ç›®è©•ä¾¡ + ã‚³ãƒ¡ãƒ³ãƒˆå—ä¿¡
   â†“
5. Firestoreã«åˆ¤å®šçµæœã‚’ä¿å­˜
   â†“
6. ãƒãƒƒãƒã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°
   â†“
7. ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆã‚’æ›´æ–°
```

### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹é€ 

```
ã‚ãªãŸã¯ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆå¯©åˆ¤ã§ã™ã€‚ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆã‚’å…¬å¹³ã«åˆ¤å®šã—ã¦ãã ã•ã„ã€‚

## ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆãƒˆãƒ”ãƒƒã‚¯
{topic}

## ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆå†…å®¹
### ç«‹è«–ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆè³›æˆï¼‰
{messages}
...

## è©•ä¾¡åŸºæº–ï¼ˆå„é …ç›®10ç‚¹æº€ç‚¹ï¼‰
1. è«–ç†æ€§
2. æ ¹æ‹ ãƒ»è¨¼æ‹ 
3. åè«–åŠ›
4. èª¬å¾—åŠ›
5. ãƒãƒŠãƒ¼

## å‡ºåŠ›å½¢å¼
JSONå½¢å¼ã§åˆ¤å®šçµæœã‚’è¿”ã—ã¦ãã ã•ã„
```

### ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Š

- **ãƒ¢ãƒ‡ãƒ«**: Gemini 1.5 Flash
- **å…¥åŠ›**: ç´„2,000æ–‡å­— = $0.25
- **å‡ºåŠ›**: ç´„500æ–‡å­— = $0.19
- **åˆè¨ˆ**: ç´„$0.44/åˆ¤å®š

---

## ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³

### ãƒã‚¤ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ 

| ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | ç²å¾—ãƒã‚¤ãƒ³ãƒˆ |
|----------|------------|
| å‚åŠ  | 10pt |
| å‹åˆ© | 30pt |
| å¼•ãåˆ†ã‘ | 15pt |
| MVPç²å¾— | 50pt |
| æº€ç‚¹è©•ä¾¡é …ç›® | 20pt |
| é€£å‹ãƒœãƒ¼ãƒŠã‚¹ | 10pt Ã— é€£å‹æ•° |

### ãƒ¬ãƒ™ãƒ«ã‚·ã‚¹ãƒ†ãƒ 

| ãƒ¬ãƒ™ãƒ« | ç§°å· | å¿…è¦ãƒã‚¤ãƒ³ãƒˆ | ã‚«ãƒ©ãƒ¼ |
|-------|------|------------|--------|
| 1-4 | åˆå¿ƒè€… | 0-400 | Green |
| 5-9 | ä¸­ç´šè€… | 400-900 | Blue |
| 10-19 | ä¸Šç´šè€… | 900-1900 | Purple |
| 20-29 | ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆ | 1900-2900 | Orange |
| 30-39 | ãƒã‚¹ã‚¿ãƒ¼ | 2900-3900 | Red |
| 40+ | ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰ | 3900+ | Gold |

### ãƒãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ 

| ãƒãƒƒã‚¸ | æ¡ä»¶ | ã‚¢ã‚¤ã‚³ãƒ³ |
|-------|------|---------|
| ã¯ã˜ã‚ã®ä¸€æ­© | åˆå‚åŠ  | ğŸš© |
| 10å›é”æˆ | 10å›å‚åŠ  | ğŸ† |
| åˆå‹åˆ© | åˆå‹åˆ© | â­ |
| 10å‹é”æˆ | 10å‹ | ğŸ–ï¸ |
| é€£å‹è¨˜éŒ² | 3é€£å‹ | ğŸ”¥ |
| å®Œç’§ãªè«–ç† | æº€ç‚¹é …ç›®ç²å¾— | ğŸ’ |
| MVPç²å¾— | MVPç²å¾— | ğŸ‘‘ |
| çš†å‹¤è³ | 1é€±é–“é€£ç¶šå‚åŠ  | ğŸ‰ |

### ãƒ©ãƒ³ã‚­ãƒ³ã‚°

1. **ãƒã‚¤ãƒ³ãƒˆãƒ©ãƒ³ã‚­ãƒ³ã‚°**: ç·ç²å¾—ãƒã‚¤ãƒ³ãƒˆé †
2. **å‹ç‡ãƒ©ãƒ³ã‚­ãƒ³ã‚°**: å‹ç‡é †ï¼ˆæœ€ä½10è©¦åˆï¼‰
3. **å‚åŠ æ•°ãƒ©ãƒ³ã‚­ãƒ³ã‚°**: å‚åŠ å›æ•°é †

---

## Firestoreã‚¹ã‚­ãƒ¼ãƒ

### debate_events
```
/debate_events/{eventId}
  - id: string
  - topic: string
  - description: string
  - scheduledAt: timestamp
  - status: string (scheduled/active/completed/cancelled)
  - allowedDurations: array<string>
  - allowedFormats: array<string>
  - createdAt: timestamp
  - updatedAt: timestamp
```

### debate_matches
```
/debate_matches/{matchId}
  - id: string
  - eventId: string
  - proTeam: {
      memberIds: array<string>
      stance: "pro"
    }
  - conTeam: {
      memberIds: array<string>
      stance: "con"
    }
  - duration: string (five/ten/fifteen)
  - format: string (standard/quick)
  - status: string (matching/matched/inProgress/completed)
  - createdAt: timestamp
  - startedAt: timestamp?
  - completedAt: timestamp?
```

### debate_rooms
```
/debate_rooms/{roomId}
  - id: string
  - matchId: string
  - eventId: string
  - currentPhase: string
  - phaseStartedAt: timestamp
  - status: string (waiting/active/completed)
  - createdAt: timestamp

  /messages (subcollection)
    /{messageId}
      - userId: string
      - content: string
      - type: string (public/team)
      - phase: string
      - createdAt: timestamp
```

### debate_judgments
```
/debate_judgments/{judgmentId}
  - id: string
  - matchId: string
  - roomId: string
  - eventId: string
  - winningSide: string? (pro/con/null)
  - proTeamScore: {
      logicScore: number
      evidenceScore: number
      rebuttalScore: number
      persuasivenessScore: number
      mannerScore: number
      totalScore: number
    }
  - conTeamScore: { ... }
  - mvpUserId: string?
  - overallComment: string
  - proTeamComment: string
  - conTeamComment: string
  - judgedAt: timestamp
  - createdAt: timestamp
```

### user_debate_stats
```
/user_debate_stats/{userId}
  - userId: string
  - totalDebates: number
  - wins: number
  - losses: number
  - draws: number
  - totalPoints: number
  - level: number
  - currentLevelPoints: number
  - pointsToNextLevel: number
  - mvpCount: number
  - earnedBadges: array<object>
  - createdAt: timestamp
  - updatedAt: timestamp
```

### debate_rankings
```
/debate_rankings/{rankingType}/users/{userId}
  - userId: string
  - userName: string
  - rank: number
  - value: number
  - level: number
  - updatedAt: timestamp

rankingType: total_points | win_rate | participation
```

---

## Cloud Functions

### 1. onDebateComplete

**ãƒˆãƒªã‚¬ãƒ¼**: Firestore `debate_rooms/{roomId}` ã®æ›´æ–°
**æ¡ä»¶**: `status` ãŒ `completed` ã«å¤‰æ›´ã•ã‚ŒãŸæ™‚
**å‡¦ç†**:
1. ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚’å–å¾—
2. ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—
3. AIåˆ¤å®šã‚’å®Ÿè¡Œ
4. åˆ¤å®šçµæœã‚’ä¿å­˜
5. ãƒãƒƒãƒã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°

```typescript
export const onDebateComplete = onDocumentUpdated(
  { document: "debate_rooms/{roomId}", region: "asia-northeast1" },
  async (event) => {
    // AIåˆ¤å®šå‡¦ç†
  }
);
```

### 2. manualJudgeDebate

**ãƒˆãƒªã‚¬ãƒ¼**: HTTPSã‚³ãƒ¼ãƒ«
**ç”¨é€”**: ãƒ‡ãƒãƒƒã‚°ãƒ»æ‰‹å‹•åˆ¤å®š
**èªè¨¼**: å¿…é ˆ

```typescript
export const manualJudgeDebate = onCall(
  { region: "asia-northeast1" },
  async (request) => {
    const {roomId} = request.data;
    const judgment = await judgeDebate(roomId, eventTopic);
    return { success: true, judgment };
  }
);
```

---

## ç”»é¢ä¸€è¦§

### 1. ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ç”»é¢
**Path**: `/debate`
**ãƒ•ã‚¡ã‚¤ãƒ«**: `debate_event_list_page.dart`

- ã‚¿ãƒ–ï¼ˆé–‹å‚¬äºˆå®šãƒ»çµ‚äº†æ¸ˆã¿ï¼‰
- ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰è¡¨ç¤º
- ãƒ—ãƒ«ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥

### 2. ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ç”»é¢
**Path**: `/debate/event/:eventId`
**ãƒ•ã‚¡ã‚¤ãƒ«**: `debate_event_detail_page.dart`

- SliverAppBar
- ãƒˆãƒ”ãƒƒã‚¯ãƒ»èª¬æ˜è¡¨ç¤º
- ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒœã‚¿ãƒ³

### 3. ã‚¨ãƒ³ãƒˆãƒªãƒ¼ç”»é¢
**Path**: `/debate/event/:eventId/entry`
**ãƒ•ã‚¡ã‚¤ãƒ«**: `debate_entry_page.dart`

- è¨­å®šãƒ•ã‚©ãƒ¼ãƒ ï¼ˆæ™‚é–“ãƒ»å½¢å¼ãƒ»ç«‹å ´ï¼‰
- ã‚¨ãƒ³ãƒˆãƒªãƒ¼é€ä¿¡

### 4. å¾…æ©Ÿç”»é¢
**Path**: `/debate/event/:eventId/waiting`
**ãƒ•ã‚¡ã‚¤ãƒ«**: `debate_waiting_room_page.dart`

- ãƒãƒƒãƒãƒ³ã‚°çŠ¶æ…‹è¡¨ç¤º
- ã‚¨ãƒ³ãƒˆãƒªãƒ¼ä¸€è¦§
- è‡ªå‹•é·ç§»

### 5. ãƒãƒƒãƒè©³ç´°ç”»é¢
**Path**: `/debate/match/:matchId`
**ãƒ•ã‚¡ã‚¤ãƒ«**: `debate_match_detail_page.dart`

- ãƒãƒ¼ãƒ æƒ…å ±è¡¨ç¤º
- ãƒãƒƒãƒè¨­å®šç¢ºèª
- é–‹å§‹ãƒœã‚¿ãƒ³

### 6. ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ ç”»é¢
**Path**: `/debate/room/:matchId`
**ãƒ•ã‚¡ã‚¤ãƒ«**: `debate_room_page.dart`

- ãƒ•ã‚§ãƒ¼ã‚ºã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼
- ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤º
- ãƒãƒ£ãƒƒãƒˆï¼ˆå…¬é–‹ãƒ»ãƒãƒ¼ãƒ å†…ï¼‰
- ãƒãƒ¼ãƒ æƒ…å ±

### 7. AIåˆ¤å®šå¾…æ©Ÿç”»é¢
**Path**: `/debate/judgment/:matchId`
**ãƒ•ã‚¡ã‚¤ãƒ«**: `debate_judgment_waiting_page.dart`

- AIåˆ¤å®šé€²è¡ŒçŠ¶æ³
- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- è‡ªå‹•é·ç§»

### 8. çµæœç”»é¢
**Path**: `/debate/result/:matchId`
**ãƒ•ã‚¡ã‚¤ãƒ«**: `debate_result_page.dart`

- å‹æ•—è¡¨ç¤º
- ã‚¹ã‚³ã‚¢æ¯”è¼ƒ
- ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ
- MVPè¡¨ç¤º
- AIã‚³ãƒ¡ãƒ³ãƒˆ

### 9. ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç”»é¢
**Path**: `/debate/ranking`
**ãƒ•ã‚¡ã‚¤ãƒ«**: `debate_ranking_page.dart`

- 3ã¤ã®ã‚¿ãƒ–ï¼ˆãƒã‚¤ãƒ³ãƒˆãƒ»å‹ç‡ãƒ»å‚åŠ æ•°ï¼‰
- ãƒˆãƒƒãƒ—3è¡¨ç¤º
- è‡ªåˆ†ã®é †ä½

### 10. çµ±è¨ˆç”»é¢
**Path**: `/debate/stats`
**ãƒ•ã‚¡ã‚¤ãƒ«**: `debate_stats_page.dart`

- ãƒ¬ãƒ™ãƒ«é€²è¡Œåº¦
- ç·åˆçµ±è¨ˆ
- å††ã‚°ãƒ©ãƒ•ï¼ˆå‹æ•—åˆ†å¸ƒï¼‰
- ãƒã‚¤ãƒ³ãƒˆå†…è¨³
- ãƒãƒƒã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³

---

## é–‹ç™ºã‚¬ã‚¤ãƒ‰

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

1. **ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
```bash
flutter pub get
```

2. **ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ**
```bash
flutter pub run build_runner build --delete-conflicting-outputs
```

3. **Cloud Functionsã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
```bash
cd functions
npm install
npm install @google-cloud/vertexai
```

4. **ãƒ‡ãƒ—ãƒ­ã‚¤**
```bash
firebase deploy --only functions
```

### æ–°æ©Ÿèƒ½è¿½åŠ ã®æ‰‹é †

#### 1. ãƒ¢ãƒ‡ãƒ«è¿½åŠ 
```bash
# models/ ã«Freezedã‚¯ãƒ©ã‚¹ã‚’ä½œæˆ
# build_runner ã§ç”Ÿæˆ
flutter pub run build_runner build
```

#### 2. Repositoryè¿½åŠ 
```bash
# repositories/ ã«ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ©ã‚¹ã‚’ä½œæˆ
# Firestoreã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…
```

#### 3. Providerè¿½åŠ 
```bash
# providers/ ã«Riverpod Providerã‚’ä½œæˆ
# Repositoryã‚’åˆ©ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿å–å¾—
```

#### 4. UIè¿½åŠ 
```bash
# pages/ ã¾ãŸã¯ widgets/ ã«ç”»é¢ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ
# Providerã‚’åˆ©ç”¨ã—ã¦çŠ¶æ…‹ç®¡ç†
```

#### 5. ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¿½åŠ 
```bash
# app_router.dart ã«ãƒ«ãƒ¼ãƒˆè¿½åŠ 
```

### ãƒ†ã‚¹ãƒˆ

#### æ‰‹å‹•åˆ¤å®šã®ãƒ†ã‚¹ãƒˆ
```dart
final functions = FirebaseFunctions.instanceFor(
  region: 'asia-northeast1'
);

final result = await functions
    .httpsCallable('manualJudgeDebate')
    .call({'roomId': 'test-room-id'});
```

#### ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ä½¿ç”¨
```bash
firebase emulators:start
```

### ãƒ‡ãƒãƒƒã‚°

#### Firestoreãƒ‡ãƒ¼ã‚¿ç¢ºèª
```
Firebase Console â†’ Firestore Database
```

#### Cloud Functionsãƒ­ã‚°ç¢ºèª
```bash
firebase functions:log --only onDebateComplete
```

#### Flutter DevTools
```bash
flutter run
# DevToolsã§RiverpodçŠ¶æ…‹ç¢ºèª
```

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. Freezedã‚¨ãƒ©ãƒ¼
```bash
# è§£æ±º: ã‚³ãƒ¼ãƒ‰å†ç”Ÿæˆ
flutter pub run build_runner build --delete-conflicting-outputs
```

#### 2. Provider not found
```bash
# è§£æ±º: Providerã®importç¢ºèª
import '../providers/debate_event_provider.dart';
```

#### 3. AIåˆ¤å®šãŒå‹•ã‹ãªã„
```bash
# ç¢ºèªäº‹é …:
# - Vertex AI APIãŒæœ‰åŠ¹ã‹
# - Cloud FunctionsãŒãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¦ã„ã‚‹ã‹
# - Firestoreãƒˆãƒªã‚¬ãƒ¼ãŒå‹•ä½œã—ã¦ã„ã‚‹ã‹
```

#### 4. ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãŒè¡¨ç¤ºã•ã‚Œãªã„
```bash
# ç¢ºèªäº‹é …:
# - user_debate_statsãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã‹
# - debate_rankingsã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãŒå­˜åœ¨ã™ã‚‹ã‹
# - Repositoryãƒ¡ã‚½ãƒƒãƒ‰ãŒæ­£ã—ãå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‹
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼è©³ç´°

### ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

#### 1. ã‚¤ãƒ™ãƒ³ãƒˆå‚åŠ ã‹ã‚‰ãƒãƒƒãƒãƒ³ã‚°

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ: ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ç”»é¢ã§ã€Œå‚åŠ ã€ã‚¿ãƒƒãƒ—
    â†“
DebateEntryPageè¡¨ç¤º
    â†“
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨­å®šé¸æŠï¼ˆæ™‚é–“ãƒ»å½¢å¼ãƒ»ç«‹å ´ï¼‰
    â†“
_submitEntry() å®Ÿè¡Œ:
  1. DebateEntryã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
  2. repository.createEntry()
  3. Firestore: debate_entries/{eventId}_{userId} ä½œæˆ
  4. repository.getEntryCount() ã§ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ•°å–å¾—
  5. eventRepository.updateParticipantCount() ã§å‚åŠ è€…æ•°æ›´æ–°
    â†“
è‡ªå‹•é·ç§»: /debate/event/{eventId}/waiting
    â†“
DebateWaitingRoomPageè¡¨ç¤º:
  - userEntryProvider((eventId, userId)) ã‚’ç›£è¦–
  - entry.status ãŒ waiting â†’ matched ã«å¤‰ã‚ã‚‹ã¾ã§å¾…æ©Ÿ
    â†“
Cloud Function (ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰) ãŒãƒãƒƒãƒãƒ³ã‚°å®Ÿè¡Œ:
  1. debate_matches/{matchId} ä½œæˆ
  2. debate_entries/{entryId}.matchId æ›´æ–°
    â†“
userEntryProvider ãŒã‚¹ãƒˆãƒªãƒ¼ãƒ ã§å¤‰æ›´æ¤œçŸ¥
    â†“
è‡ªå‹•é·ç§»: /debate/match/{matchId}
```

#### 2. ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆå®Ÿè¡Œã‹ã‚‰AIåˆ¤å®š

```
DebateRoomPageè¡¨ç¤º:
  - matchDetailProvider(matchId) ã§ãƒãƒƒãƒå–å¾—
  - debateRoomByMatchProvider(matchId) ã§ãƒ«ãƒ¼ãƒ å–å¾—
  - room.participantStances[userId] ã§è‡ªåˆ†ã®ç«‹å ´ç¢ºèª
    â†“
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡:
  DebateChatWidget._sendMessage():
    1. DebateMessageã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
    2. repository.sendMessage()
    3. Firestore: debate_rooms/{roomId}/messages/{messageId} ä½œæˆ
    4. roomMessagesProvider ãŒã‚¹ãƒˆãƒªãƒ¼ãƒ ã§æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡
    5. UIè‡ªå‹•æ›´æ–°
    â†“
å„ãƒ•ã‚§ãƒ¼ã‚ºãŒé€²è¡Œï¼ˆpreparation â†’ opening â†’ question â†’ rebuttal â†’ closingï¼‰
    â†“
æœ€çµ‚ãƒ•ã‚§ãƒ¼ã‚ºçµ‚äº†:
  - room.status â†’ RoomStatus.judging
  - room.currentPhase â†’ DebatePhase.judgment
    â†“
Cloud Function onDebateComplete ãƒˆãƒªã‚¬ãƒ¼:
  1. debate_rooms/{roomId}/messages å…¨å–å¾—
  2. Vertex AI (Gemini) ã§åˆ¤å®šå®Ÿè¡Œ
  3. JudgmentResultä½œæˆ
  4. Firestore: debate_judgments/{judgmentId} ä¿å­˜
  5. debate_matches/{matchId} æ›´æ–°ï¼ˆstatus: completed, winningSideè¨­å®šï¼‰
  6. user_debate_stats/{userId} æ›´æ–°ï¼ˆå‹æ•—ãƒ»ãƒã‚¤ãƒ³ãƒˆãƒ»ãƒ¬ãƒ™ãƒ«ï¼‰
  7. debate_rankings/{type}/users/{userId} æ›´æ–°
    â†“
DebateJudgmentWaitingPage:
  - judgmentResultProvider(matchId) ã§ãƒãƒ¼ãƒªãƒ³ã‚°
  - åˆ¤å®šçµæœãŒä¿å­˜ã•ã‚Œã‚‹ã¨æ¤œçŸ¥
    â†“
è‡ªå‹•é·ç§»: /debate/result/{matchId}
    â†“
DebateResultPageè¡¨ç¤º:
  - å‹è€…è¡¨ç¤º
  - è©³ç´°ã‚¹ã‚³ã‚¢ï¼ˆ5é …ç›®ï¼‰
  - ãƒãƒ£ãƒ¼ãƒˆï¼ˆãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒ»æ£’ã‚°ãƒ©ãƒ•ï¼‰
  - MVPè¡¨ç¤º
  - AIã‚³ãƒ¡ãƒ³ãƒˆ
```

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒˆãƒªãƒ¼ãƒ ä¸€è¦§

| Provider | ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ | æ›´æ–°ãƒˆãƒªã‚¬ãƒ¼ |
|----------|------------|------------|
| `eventDetailProvider(eventId)` | watchEvent(eventId) | ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±æ›´æ–°æ™‚ |
| `upcomingEventsProvider` | watchUpcomingEvents() | æ–°ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ æ™‚ |
| `userEntryProvider({eventId, userId})` | watchUserEntry() | ã‚¨ãƒ³ãƒˆãƒªãƒ¼çŠ¶æ…‹å¤‰æ›´ãƒ»ãƒãƒƒãƒIDå‰²ã‚Šå½“ã¦æ™‚ |
| `matchDetailProvider(matchId)` | watchMatch(matchId) | ãƒãƒƒãƒçŠ¶æ…‹å¤‰æ›´æ™‚ |
| `roomDetailProvider(roomId)` | watchRoom(roomId) | ãƒ•ã‚§ãƒ¼ã‚ºå¤‰æ›´ãƒ»ã‚¿ã‚¤ãƒãƒ¼æ›´æ–°æ™‚ |
| `roomMessagesProvider(roomId)` | watchMessages(roomId) | æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æŠ•ç¨¿æ™‚ |
| `teamMessagesProvider(roomId)` | watchMessages(roomId, type: team) | ãƒãƒ¼ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æŠ•ç¨¿æ™‚ |
| `userStatsProvider(userId)` | watchUserStats(userId) | çµ±è¨ˆæ›´æ–°æ™‚ |

---

## ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ•ãƒ­ãƒ¼

### ã‚¢ã‚¯ã‚·ãƒ§ãƒ³1: ã‚¤ãƒ™ãƒ³ãƒˆã‚¨ãƒ³ãƒˆãƒªãƒ¼

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ DebateEventDetailPage(eventId) ã‚’é–‹ã
2. eventDetailProvider(eventId) ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±å–å¾—
3. ã€Œå‚åŠ ã€ãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ—
4. DebateEntryPage(eventId) ã«é·ç§»
5. ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤ºï¼ˆæ™‚é–“ãƒ»å½¢å¼ãƒ»ç«‹å ´é¸æŠï¼‰
6. é€ä¿¡ãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ—
7. _submitEntry() å®Ÿè¡Œ:
   a. DebateEntryä½œæˆï¼ˆstatus: waitingï¼‰
   b. repository.createEntry() â†’ debate_entries/{eventId}_{userId}
   c. repository.getEntryCount() â†’ å¾…æ©Ÿä¸­ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ•°å–å¾—
   d. eventRepository.updateParticipantCount() â†’ ã‚¤ãƒ™ãƒ³ãƒˆå‚åŠ è€…æ•°æ›´æ–°
8. æˆåŠŸ â†’ pushReplacement('/debate/event/{eventId}/waiting')
9. DebateWaitingRoomPageè¡¨ç¤º
```

### ã‚¢ã‚¯ã‚·ãƒ§ãƒ³2: ãƒãƒƒãƒãƒ³ã‚°å¾…æ©Ÿ

```
1. DebateWaitingRoomPage ãƒã‚¦ãƒ³ãƒˆ
2. userEntryProvider((eventId, userId)) ç›£è¦–é–‹å§‹
3. ã‚¨ãƒ³ãƒˆãƒªãƒ¼è¨­å®šè¡¨ç¤ºï¼ˆé¸æŠã—ãŸæ™‚é–“ãƒ»å½¢å¼ãƒ»ç«‹å ´ï¼‰
4. å¾…æ©Ÿã‚¿ã‚¤ãƒãƒ¼é–‹å§‹ï¼ˆ1ç§’ã”ã¨ã«å¢—åŠ ï¼‰
5. entry.status ã®å¤‰åŒ–ã‚’ç›£è¦–ï¼ˆwaiting â†’ matchedï¼‰
6. entry.matchId ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸã‚‰:
   a. ã‚¹ãƒˆãƒªãƒ¼ãƒ ã§å¤‰æ›´æ¤œçŸ¥
   b. pushReplacementNamed('/debate/match/{matchId}')
7. DebateMatchDetailPage ã«é·ç§»
```

### ã‚¢ã‚¯ã‚·ãƒ§ãƒ³3: ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆé–‹å§‹

```
1. DebateMatchDetailPage ã§ãƒãƒƒãƒè©³ç´°è¡¨ç¤º
2. å¯¾æˆ¦ç›¸æ‰‹æƒ…å ±è¡¨ç¤º
3. ã€Œé–‹å§‹ã€ãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ—
4. push('/debate/room/{matchId}')
5. DebateRoomPage ãƒ­ãƒ¼ãƒ‰:
   a. matchDetailProvider(matchId) â†’ DebateMatchå–å¾—
   b. debateRoomByMatchProvider(matchId) â†’ DebateRoomå–å¾—
   c. room.participantStances[userId] â†’ è‡ªåˆ†ã®ç«‹å ´å–å¾—
6. UIè¡¨ç¤º:
   - ç¾åœ¨ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆä¾‹: "Opening Pro", "Rebuttal Con"ï¼‰
   - ãƒ•ã‚§ãƒ¼ã‚ºã‚¿ã‚¤ãƒãƒ¼ï¼ˆæ®‹ã‚Šç§’æ•°ï¼‰
   - ã‚¿ãƒ–: å…¬é–‹ãƒãƒ£ãƒƒãƒˆ | ãƒãƒ¼ãƒ å†…ãƒãƒ£ãƒƒãƒˆ
7. ãƒ«ãƒ¼ãƒ ãƒ˜ãƒƒãƒ€ãƒ¼:
   - è³›æˆãƒãƒ¼ãƒ  vs åå¯¾ãƒãƒ¼ãƒ 
   - ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼æ•°
   - è‡ªåˆ†ã®ãƒãƒ¼ãƒ ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
```

### ã‚¢ã‚¯ã‚·ãƒ§ãƒ³4: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡

```
1. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
2. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›ï¼ˆæœ€å¤§200æ–‡å­—ã€ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚ã‚Šï¼‰
3. é€ä¿¡ã‚¿ãƒƒãƒ—
4. DebateChatWidget._sendMessage():
   a. DebateMessageã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ:
      - id: UUID
      - roomId, userId
      - content: å…¥åŠ›ãƒ†ã‚­ã‚¹ãƒˆ
      - type: MessageType.public ã¾ãŸã¯ .team
      - phase: ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚º
      - status: MessageStatus.sent
      - createdAt: now
   b. repository.sendMessage() å‘¼ã³å‡ºã—
   c. Firestoreæ›¸ãè¾¼ã¿: debate_rooms/{roomId}/messages/{messageId}
5. watchMessages ã‚¹ãƒˆãƒªãƒ¼ãƒ ã§æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡
6. å…¨å‚åŠ è€…ãŒå…¬é–‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é–²è¦§
7. ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã®ã¿ãƒãƒ£ãƒƒãƒˆã‚’é–²è¦§
8. messageCount[userId] å¢—åŠ 
9. ä¸é©åˆ‡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ¤œå‡ºæ™‚ â†’ isWarning=trueã€ã‚·ã‚¹ãƒ†ãƒ ãŒãƒ•ãƒ©ã‚°
```

### ã‚¢ã‚¯ã‚·ãƒ§ãƒ³5: åˆ¤å®šå¾…æ©Ÿã¨çµæœè¡¨ç¤º

```
1. æœ€çµ‚ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆclosingConï¼‰ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
2. room.status â†’ RoomStatus.judging
3. currentPhase â†’ DebatePhase.judgment
4. Cloud Function ãƒˆãƒªã‚¬ãƒ¼ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰:
   - roomId
   - matchId
   - debate_rooms/{roomId}/messages å…¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
   - participantStances ã‹ã‚‰ãƒãƒ¼ãƒ å‰²ã‚Šå½“ã¦
5. AIåˆ¤å®šå®Ÿè¡Œ
6. JudgmentResultä½œæˆ:
   - 5é …ç›®ã§ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ï¼ˆpro/conï¼‰
   - MVPé¸å‡º
   - ã‚³ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
   - debate_judgments/{judgmentId} ã«ä¿å­˜
7. room.judgmentId æ›´æ–°
8. DebateJudgmentWaitingPage:
   - judgmentResultProvider(matchId) ã§ãƒãƒ¼ãƒªãƒ³ã‚°
   - åˆ¤å®šç™ºè¦‹ â†’ pushReplacementNamed('/debate/result/{matchId}')
9. DebateResultPageè¡¨ç¤º:
   a. å‹è€…ãƒãƒŠãƒ¼ï¼ˆpro/con/å¼•ãåˆ†ã‘ï¼‰
   b. åˆè¨ˆã‚¹ã‚³ã‚¢ï¼ˆpro vs conï¼‰
   c. è©³ç´°ã‚¹ã‚³ã‚¢ï¼ˆè«–ç†æ€§ãƒ»æ ¹æ‹ ãƒ»åè«–ãƒ»èª¬å¾—åŠ›ãƒ»ãƒãƒŠãƒ¼ï¼‰
   d. ãƒãƒ£ãƒ¼ãƒˆï¼ˆãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒ»æ£’ã‚°ãƒ©ãƒ•ï¼‰
   e. MVPã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆmvpUserIdå­˜åœ¨æ™‚ï¼‰
   f. AIã‚³ãƒ¡ãƒ³ãƒˆ
10. ã€Œãƒ›ãƒ¼ãƒ ã€ã‚¿ãƒƒãƒ— â†’ popUntil(isFirst)
```

### ã‚¢ã‚¯ã‚·ãƒ§ãƒ³6: çµ±è¨ˆç¢ºèª

```
1. DebateStatsPage ãƒã‚¦ãƒ³ãƒˆ
2. authControllerProvider ã‹ã‚‰ userId å–å¾—
3. userDebateStatsProvider(userId) ç›£è¦–
4. è¡¨ç¤º:
   - ãƒ¬ãƒ™ãƒ«é€²æ—ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆï¼ˆcurrentLevelPoints / pointsToNextLevelï¼‰
   - ç·åˆçµ±è¨ˆ: totalDebates, wins, losses, draws, totalPoints, mvpCount
   - å††ã‚°ãƒ©ãƒ•: å‹æ•—åˆ†å¸ƒ
   - ãƒã‚¤ãƒ³ãƒˆå†…è¨³ï¼ˆæ¨å®šï¼‰
   - ãƒãƒƒã‚¸ã‚°ãƒªãƒƒãƒ‰ï¼ˆç²å¾—ãƒãƒƒã‚¸ï¼‰
5. ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã‚¢ã‚¤ã‚³ãƒ³ã‚¿ãƒƒãƒ— â†’ ref.invalidate(provider)
```

### ã‚¢ã‚¯ã‚·ãƒ§ãƒ³7: ãƒ©ãƒ³ã‚­ãƒ³ã‚°é–²è¦§

```
1. DebateRankingPage è¡¨ç¤º
2. 3ã‚¿ãƒ–: ãƒã‚¤ãƒ³ãƒˆ | å‹ç‡ | å‚åŠ æ•°
3. å„ã‚¿ãƒ–ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ç›£è¦–:
   - pointsRankingProvider
   - winRateRankingProvider
   - participationRankingProvider
4. debate_rankings/{type}/users ã‹ã‚‰å–å¾—
5. è¡¨ç¤º:
   - ä¸Šéƒ¨: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ©ãƒ³ã‚¯ã‚«ãƒ¼ãƒ‰ï¼ˆãƒˆãƒƒãƒ—100å†…ã®å ´åˆï¼‰
   - ä¸‹éƒ¨: å…¨ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒªã‚¹ãƒˆ
   - ãƒˆãƒƒãƒ—3ã«ãƒ¡ãƒ€ãƒ«è¡¨ç¤ºï¼ˆé‡‘ãƒ»éŠ€ãƒ»éŠ…ï¼‰
6. å„ã‚¨ãƒ³ãƒˆãƒªãƒ¼: é †ä½ãƒ»åå‰ãƒ»ãƒ¬ãƒ™ãƒ«ãƒ»å€¤ï¼ˆãƒã‚¤ãƒ³ãƒˆ/å‹ç‡/å›æ•°ï¼‰
7. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¡Œã‚’é’è‰²ãƒã‚¤ãƒ©ã‚¤ãƒˆ
```

---

## å®Ÿè£…çŠ¶æ³

### âœ… å®Œå…¨å®Ÿè£…æ¸ˆã¿

#### Modelsï¼ˆãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ï¼‰
- âœ… DebateEventï¼ˆEventStatus, DebateDuration, DebateFormatå«ã‚€ï¼‰
- âœ… DebateMatchï¼ˆDebateEntry, DebateTeam, DebateStanceå«ã‚€ï¼‰
- âœ… DebateRoomï¼ˆDebatePhase, RoomStatuså«ã‚€ï¼‰
- âœ… DebateMessageï¼ˆMessageType, MessageStatus, MessageLimitså«ã‚€ï¼‰
- âœ… UserDebateStatsï¼ˆBadgeType, EarnedBadge, RankingEntryå«ã‚€ï¼‰
- âœ… JudgmentResultï¼ˆTeamScore, IndividualEvaluation, JudgmentCriteriaå«ã‚€ï¼‰

#### Repositoriesï¼ˆãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ï¼‰
- âœ… DebateEventRepository - ã‚¤ãƒ™ãƒ³ãƒˆCRUD + ã‚¹ãƒˆãƒªãƒ¼ãƒ 
- âœ… DebateMatchRepository - ã‚¨ãƒ³ãƒˆãƒªãƒ¼ç®¡ç† + ãƒãƒƒãƒã‚¯ã‚¨ãƒª
- âœ… DebateRoomRepository - ãƒ«ãƒ¼ãƒ ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€åˆ¤å®šç®¡ç†
- âœ… UserDebateStatsRepository - çµ±è¨ˆã€ãƒãƒƒã‚¸ã€ãƒ©ãƒ³ã‚­ãƒ³ã‚°

#### Providersï¼ˆçŠ¶æ…‹ç®¡ç†ï¼‰
- âœ… DebateEventProvider - ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ  & Futureãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
- âœ… DebateMatchProvider - ã‚¨ãƒ³ãƒˆãƒªãƒ¼ & ãƒãƒƒãƒãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
- âœ… DebateRoomProvider - ãƒ«ãƒ¼ãƒ ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€åˆ¤å®šãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
- âœ… UserDebateStatsProvider - çµ±è¨ˆ & ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼

#### Pagesï¼ˆç”»é¢ï¼‰
- âœ… DebateEventListPage - ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§
- âœ… DebateEventDetailPage - ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°
- âœ… DebateEntryPage - ã‚¨ãƒ³ãƒˆãƒªãƒ¼è¨­å®š
- âœ… DebateWaitingRoomPage - ãƒãƒƒãƒãƒ³ã‚°å¾…æ©Ÿ
- âœ… DebateMatchDetailPage - ãƒãƒƒãƒç¢ºèª
- âœ… DebateRoomPage - ãƒ©ã‚¤ãƒ–ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆ
- âœ… DebateJudgmentWaitingPage - åˆ¤å®šå¾…æ©Ÿ
- âœ… DebateResultPage - åˆ¤å®šçµæœè¡¨ç¤º
- âœ… DebateRankingPage - ãƒ©ãƒ³ã‚­ãƒ³ã‚°
- âœ… DebateStatsPage - ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆ

#### Widgetsï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰
- âœ… EventCard - ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰
- âœ… EntryForm - ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒ•ã‚©ãƒ¼ãƒ 
- âœ… PhaseIndicatorWidget - ãƒ•ã‚§ãƒ¼ã‚ºè¡¨ç¤º + é€²æ—ãƒãƒ¼
- âœ… DebateTimerWidget - ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã‚¿ã‚¤ãƒãƒ¼
- âœ… DebateChatWidget - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒªã‚¹ãƒˆ + å…¥åŠ›
- âœ… JudgmentScoreWidget - ã‚¹ã‚³ã‚¢è¡¨ç¤º
- âœ… MVPDisplayWidget - MVPè¡¨ç¤º
- âœ… JudgmentCommentWidget - ã‚³ãƒ¡ãƒ³ãƒˆè¡¨ç¤º
- âœ… JudgmentRadarChartWidget - ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ
- âœ… JudgmentBarChartWidget - æ£’ã‚°ãƒ©ãƒ•
- âœ… MatchingStatusWidget - ãƒãƒƒãƒã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
- âœ… LevelProgressWidget - ãƒ¬ãƒ™ãƒ« & XPé€²æ—ãƒãƒ¼
- âœ… BadgeDisplayWidget - ãƒãƒƒã‚¸ã‚°ãƒªãƒƒãƒ‰
- âœ… PointsAnimationWidget - ãƒã‚¤ãƒ³ãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

#### Cloud Functions
- âœ… onDebateComplete - Firestoreãƒˆãƒªã‚¬ãƒ¼ï¼ˆåˆ¤å®šå®Ÿè¡Œï¼‰
- âœ… manualJudgeDebate - HTTPSã‚³ãƒ¼ãƒ«ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
- âœ… scheduledMatching - Cloud Schedulerï¼ˆ1åˆ†ã”ã¨ãƒãƒƒãƒãƒ³ã‚°ï¼‰
- âœ… manualMatching - HTTPSã‚³ãƒ¼ãƒ«ï¼ˆæ‰‹å‹•ãƒãƒƒãƒãƒ³ã‚°ï¼‰

#### Vertex AIçµ±åˆ
- âœ… vertexai.ts - Gemini 1.5 Flashè¨­å®š
- âœ… debateJudgmentService.ts - AIåˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯
- âœ… debateMatchingService.ts - ãƒãƒƒãƒãƒ³ã‚°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

---

## æœªå®Ÿè£…æ©Ÿèƒ½ãƒ»TODO

### ğŸ”´ Criticalï¼ˆæ©Ÿèƒ½ãƒ–ãƒ­ãƒƒã‚¯ï¼‰

#### 1. MVPå®Ÿåè¡¨ç¤º
- **å ´æ‰€**: `debate_result_page.dart:346`
- **ç¾çŠ¶**: `userName: judgment.mvpUserId`ï¼ˆuserIdã‚’åå‰ã¨ã—ã¦è¡¨ç¤ºï¼‰
- **TODO**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼åå–å¾—
```dart
// å¿…è¦ãªå®Ÿè£…
final user = await userRepository.getUser(judgment.mvpUserId);
MVPDisplayWidget(
  userId: judgment.mvpUserId!,
  userName: user.displayName, // å®Ÿéš›ã®åå‰
  teamColor: mvpTeamColor,
);
```

#### 2. ãƒ•ã‚§ãƒ¼ã‚ºè‡ªå‹•é€²è¡Œ
- **å ´æ‰€**: `debate_room_page.dart:111`
- **ç¾çŠ¶**: TODOã‚³ãƒ¡ãƒ³ãƒˆã€Œãƒ•ã‚§ãƒ¼ã‚ºçµ‚äº†å‡¦ç†ã€
- **TODO**: ã‚¿ã‚¤ãƒãƒ¼ã§ãƒ•ã‚§ãƒ¼ã‚ºè‡ªå‹•é€²è¡Œ
```dart
// å¿…è¦ãªå®Ÿè£…
Timer.periodic(Duration(seconds: 1), (timer) {
  if (phaseTimeRemaining <= 0) {
    // æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã¸é·ç§»
    await repository.updatePhase(roomId, nextPhase);
  }
});
```

#### 3. ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ¤œè¨¼
- **å ´æ‰€**: `debate_entry_page.dart`
- **ç¾çŠ¶**: nullå€¤ã§é€ä¿¡å¯èƒ½
- **TODO**: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 
```dart
if (selectedDuration == null || selectedFormat == null) {
  showError('å…¨ã¦ã®é …ç›®ã‚’é¸æŠã—ã¦ãã ã•ã„');
  return;
}
```

### ğŸŸ¡ Importantï¼ˆã‚³ã‚¢æ©Ÿèƒ½ï¼‰

#### 4. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ¬ãƒ¼ãƒˆåˆ¶é™
- **å ´æ‰€**: `debate_chat_widget.dart`
- **ç¾çŠ¶**: MessageLimitsãƒ¢ãƒ‡ãƒ«å­˜åœ¨ã™ã‚‹ãŒæœªä½¿ç”¨
- **TODO**: ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³å®Ÿè£…
```dart
if (DateTime.now().difference(lastMessageTime) < Duration(seconds: 30)) {
  showError('30ç§’å¾…ã£ã¦ã‹ã‚‰é€ä¿¡ã—ã¦ãã ã•ã„');
  return;
}
```

#### 5. è­¦å‘Šã‚«ã‚¦ãƒ³ãƒˆé©ç”¨
- **å ´æ‰€**: `debate_room_repository.dart`
- **ç¾çŠ¶**: warningCountè¿½è·¡ã•ã‚Œã‚‹ãŒå‡¦ç†ãªã—
- **TODO**: æœ€å¤§è­¦å‘Šè¶…éã§ã‚­ãƒƒã‚¯
```dart
if (room.warningCount[userId] >= 3) {
  await kickUser(userId);
}
```

#### 6. ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆçµ‚äº†å¾Œã®çµ±è¨ˆæ›´æ–°
- **å ´æ‰€**: Cloud Functions
- **ç¾çŠ¶**: ãƒ­ã‚¸ãƒƒã‚¯æœªå®Ÿè£…
- **TODO**: judgeDebateå®Ÿè¡Œæ™‚ã«çµ±è¨ˆæ›´æ–°
```typescript
// å¿…è¦ãªå®Ÿè£…
await updateUserStats(userId, {
  totalDebates: increment(1),
  wins: isWinner ? increment(1) : 0,
  totalPoints: increment(points),
  level: newLevel,
  // ...
});
```

#### 7. ãƒãƒƒã‚¸æˆä¸ãƒ­ã‚¸ãƒƒã‚¯
- **å ´æ‰€**: Cloud Functions
- **ç¾çŠ¶**: BadgeTypeå®šç¾©æ¸ˆã¿ã ãŒæˆä¸ãƒ­ã‚¸ãƒƒã‚¯ãªã—
- **TODO**: æ¡ä»¶ãƒã‚§ãƒƒã‚¯ & æˆä¸
```typescript
if (stats.totalDebates === 1) {
  await awardBadge(userId, BadgeType.firstDebate);
}
if (stats.wins === 10) {
  await awardBadge(userId, BadgeType.tenWins);
}
```

#### 8. æœˆæ¬¡ãƒªã‚»ãƒƒãƒˆ
- **å ´æ‰€**: ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼
- **ç¾çŠ¶**: resetMonthlyPoints()ãƒ¡ã‚½ãƒƒãƒ‰å­˜åœ¨ã™ã‚‹ãŒå‘¼ã³å‡ºã—ãªã—
- **TODO**: æœˆ1å›ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¿½åŠ 
```typescript
export const monthlyReset = onSchedule({
  schedule: 'every month 00:00',
  timeZone: 'Asia/Tokyo'
}, async () => {
  // å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®currentMonthPointsã‚’ãƒªã‚»ãƒƒãƒˆ
});
```

#### 9. ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ›´æ–°
- **å ´æ‰€**: Cloud Functions
- **ç¾çŠ¶**: getRanking()ãƒ¡ã‚½ãƒƒãƒ‰ã®ã¿
- **TODO**: ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆçµ‚äº†æ™‚ã«ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ›´æ–°
```typescript
await updateRanking('total_points', userId, {
  rank: calculateRank(),
  value: totalPoints,
  // ...
});
```

### ğŸŸ¢ Lowï¼ˆæ”¹å–„ï¼‰

#### 10. ã‚·ã‚§ã‚¢æ©Ÿèƒ½
- **å ´æ‰€**: `debate_result_page.dart:428`
- **ç¾çŠ¶**: ã‚¹ãƒŠãƒƒã‚¯ãƒãƒ¼ã€Œæº–å‚™ä¸­ã§ã™ã€
- **TODO**: ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚·ã‚§ã‚¢å®Ÿè£…

#### 11. åˆ¤å®šãƒãƒ¼ãƒªãƒ³ã‚°åŠ¹ç‡åŒ–
- **å ´æ‰€**: `debate_judgment_waiting_page.dart:74`
- **ç¾çŠ¶**: 2ç§’ã”ã¨ã«ãƒãƒ¼ãƒªãƒ³ã‚°
- **TODO**: Firestoreãƒªã‚¹ãƒŠãƒ¼ã«å¤‰æ›´
```dart
// å¤‰æ›´å¾Œ
final judgmentStream = ref.watch(
  judgmentStreamProvider(matchId) // StreamProvider
);
```

#### 12. ã‚¨ãƒ©ãƒ¼ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯
- **å ´æ‰€**: å„Repository
- **ç¾çŠ¶**: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã§å¤±æ•—
- **TODO**: æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ã§ãƒªãƒˆãƒ©ã‚¤

#### 13. ãƒ«ãƒ¼ãƒˆå®šæ•°åŒ–
- **å ´æ‰€**: å…¨ãƒšãƒ¼ã‚¸
- **ç¾çŠ¶**: ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ«ãƒ¼ãƒˆ
- **TODO**: GoRouteråå‰ä»˜ããƒ«ãƒ¼ãƒˆä½¿ç”¨

---

## æ—¢çŸ¥ã®å•é¡Œ

### ğŸ”´ Critical Issues

#### 1. Atomicã§ãªã„ãƒãƒ«ãƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›¸ãè¾¼ã¿
**å ´æ‰€**: `functions/src/index.ts:77-106`

**å•é¡Œ**: åˆ¤å®šä½œæˆã¨ãƒãƒƒãƒæ›´æ–°ãŒåˆ¥ã€…ã®Firestoreæ›¸ãè¾¼ã¿ã€‚2ç•ªç›®ãŒå¤±æ•—ã™ã‚‹ã¨ä¸æ•´åˆã€‚

```typescript
// ç¾çŠ¶
await firestore.collection('debate_judgments').doc(judgmentId).set(...);
await firestore.collection('debate_matches').doc(matchId).update(...);

// æ¨å¥¨: ãƒãƒƒãƒæ›¸ãè¾¼ã¿
const batch = firestore.batch();
batch.set(judgmentRef, judgmentData);
batch.update(matchRef, matchUpdateData);
await batch.commit();
```

#### 2. Vertex AIãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãƒŸã‚¹ãƒãƒƒãƒ
**å ´æ‰€**: `functions/src/config/vertexai.ts:6`

**å•é¡Œ**: Vertex AIãŒ`us-central1`ã€Cloud FunctionsãŒ`asia-northeast1`ã€‚å¾€å¾©ãƒ¬ã‚¤ãƒ†ãƒ³ã‚· ~150msè¿½åŠ ã€‚

**ä¿®æ­£**: `location: 'asia-northeast1'` ã«å¤‰æ›´

#### 3. ã‚¨ãƒ©ãƒ¼ãŒé»™ã£ã¦å‡¦ç†ã•ã‚Œã‚‹
**å ´æ‰€**: `functions/src/index.ts:109-112`

**å•é¡Œ**: ãƒˆãƒªã‚¬ãƒ¼ã§catchã—ã¦ã‚‚å†ã‚¹ãƒ­ãƒ¼ã›ãšã€é–¢æ•°ã¯æˆåŠŸæ‰±ã„ã€‚

```typescript
// ç¾çŠ¶
catch (error) {
  logger.error("Error in AI judgment:", error);
  // ã‚¨ãƒ©ãƒ¼é€šçŸ¥ãªã© â† æœªå®Ÿè£…
}

// æ¨å¥¨
catch (error) {
  logger.error("Error in AI judgment:", error);
  await sendErrorNotification(error);
  throw error; // é–¢æ•°ã‚’å¤±æ•—ã¨ã—ã¦ãƒãƒ¼ã‚¯
}
```

### ğŸŸ¡ Medium Issues

#### 4. ãƒãƒƒãƒãƒ³ã‚°é‡è¤‡é˜²æ­¢ãªã—
**å ´æ‰€**: `functions/src/services/debateMatchingService.ts`

**å•é¡Œ**: ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼ãŒåŒæ™‚å®Ÿè¡Œã•ã‚Œã‚‹ã¨é‡è¤‡ãƒãƒƒãƒä½œæˆã®å¯èƒ½æ€§ã€‚

**æ¨å¥¨**: ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒ­ãƒƒã‚¯ã¾ãŸã¯ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ä½¿ç”¨

#### 5. ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚¨ãƒ³ãƒˆãƒªãƒ¼IDãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
**å ´æ‰€**: `lib/feature/debate/repositories/debate_match_repository.dart:17`

```dart
final docId = '${entry.eventId}_${entry.userId}';
```

**å•é¡Œ**: Cloud Functionsã¨åŒã˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå‰æã€‚å¤‰æ›´ã™ã‚‹ã¨ãƒãƒƒãƒãƒ³ã‚°ç ´æã€‚

**æ¨å¥¨**: ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆçµ±ä¸€ã‚’ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–

#### 6. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ãªã—
**å ´æ‰€**: `functions/src/services/debateJudgmentService.ts:45`

**å•é¡Œ**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹ã‚’ç›´æ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å«ã‚ã‚‹ã€‚æ‚ªæ„ã‚ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã§æ“ä½œå¯èƒ½æ€§ã€‚

**æ¨å¥¨**: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚µãƒ‹ã‚¿ã‚¤ã‚ºã¾ãŸã¯ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—

#### 7. Vertex AIã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæœªè¨­å®š
**å ´æ‰€**: `functions/src/services/debateJudgmentService.ts:226`

**å•é¡Œ**: AIå¿œç­”ã« >2åˆ†ã‹ã‹ã‚‹ã¨é–¢æ•°ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆ540ç§’ï¼‰ã¾ã§å¾…æ©Ÿã€‚

**æ¨å¥¨**: æ˜ç¤ºçš„ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šï¼ˆä¾‹: 60ç§’ï¼‰

### ğŸŸ¢ Low Issues

#### 8. åˆ¤å®šè©³ç´°ãƒ­ã‚°ãªã—
**å•é¡Œ**: æˆåŠŸæ™‚ã®ãƒ­ã‚°ãªã—ã€‚ãƒ‡ãƒãƒƒã‚°å›°é›£ã€‚

**æ¨å¥¨**: info ãƒ¬ãƒ™ãƒ«ã§åˆ¤å®šçµæœãƒ­ã‚°è¿½åŠ 

#### 9. ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼
**å ´æ‰€**: `debate_stats_page.dart:336, 342, 348`

```dart
stats.totalDebates * 10  // 1å›10pt
stats.wins * 30          // å‹åˆ©30pt
stats.mvpCount * 50      // MVP50pt
```

**æ¨å¥¨**: å®šæ•°ãƒ•ã‚¡ã‚¤ãƒ«ã«ç§»å‹•

#### 10. æœªä½¿ç”¨å¤‰æ•°
**å ´æ‰€**: `functions/src/services/debateMatchingService.ts:101`

```typescript
for (const [, groupEntries] of groups) {
  // ã‚­ãƒ¼æœªä½¿ç”¨
}
```

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒå¯Ÿ

### Firestoreã‚¯ã‚¨ãƒªåŠ¹ç‡

| ã‚¯ã‚¨ãƒª | ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ | ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ | ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å¿…è¦ | æ‡¸å¿µ |
|-------|------------|----------|--------------|------|
| getUpcomingEvents | events | status IN [...] + scheduledAt | âœ… è¤‡åˆ | ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œè‰¯å¥½ |
| getEntryCount | entries | eventId + status=waiting | âœ… è¤‡åˆ | ã‚·ãƒ³ãƒ—ãƒ«ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ |
| getUserMatchHistory | matches | memberIdsé…åˆ— | âœ… é…åˆ— | 2ã‚¯ã‚¨ãƒªå¿…è¦ï¼ˆpro/conåˆ¥ã€…ï¼‰ |
| watchMessages | messages | createdAté † | âŒ ä¸è¦ | < 1000ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãªã‚‰å•é¡Œãªã— |
| getRanking | rankings | valueé † | âŒ ä¸è¦ | äº‹å‰è¨ˆç®—æ¸ˆã¿ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ |
| getUserStats | stats | doc(userId) | âŒ ä¸è¦ | ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã€åŠ¹ç‡çš„ |

**æ½œåœ¨çš„å•é¡Œ**:
- é…åˆ—containsã‚¯ã‚¨ãƒªï¼ˆgetUserMatchHistoryï¼‰ã¯2ã‚¯ã‚¨ãƒªå¿…è¦
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¯10k+ã§å¢—å¤§å¯èƒ½
- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯å®šæœŸæ›´æ–°å¿…è¦ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãªã„ï¼‰

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒªã‚¹ãƒŠãƒ¼ã‚³ã‚¹ãƒˆ
- ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ å†…ã§ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚¹ãƒˆãƒªãƒ¼ãƒ 8å€‹ä»¥ä¸Š/ãƒ¦ãƒ¼ã‚¶ãƒ¼
- judgmentResultProviderãŒ2ç§’ã”ã¨ã«ãƒãƒ¼ãƒªãƒ³ã‚°ï¼ˆã‚³ã‚¹ãƒˆé«˜ï¼‰
- Firestoreãƒªã‚¹ãƒŠãƒ¼ä½¿ç”¨æ¨å¥¨

### æ¨å¥¨æœ€é©åŒ–
1. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒªã‚¹ãƒˆã«ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 
2. ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥
3. åˆ¤å®šç”¨ã«ãƒãƒ¼ãƒªãƒ³ã‚°ã§ã¯ãªãFirestoreãƒªã‚¹ãƒŠãƒ¼ä½¿ç”¨
4. Cloud Functionã§çµ±è¨ˆã‚’ãƒãƒƒãƒæ›´æ–°
5. ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ«ãƒ¼ãƒ ã®ã¿ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒªã‚¹ãƒŠãƒ¼åˆ¶é™

---

## ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Š

### åˆ¤å®š1å›ã‚ãŸã‚Š
- Firestoreèª­ã¿å–ã‚Š: ~4æ“ä½œ Ã— $0.06/100K = $0.0000024
- Firestoreæ›¸ãè¾¼ã¿: ~2æ“ä½œ Ã— $0.18/100K = $0.0000036
- Vertex AI: ~2,000ãƒˆãƒ¼ã‚¯ãƒ³ Ã— $0.075/1M = $0.00015
- **åˆè¨ˆ/åˆ¤å®š: ~$0.000156**

### ãƒãƒƒãƒãƒ³ã‚°1å›ã‚ãŸã‚Š
- Firestoreèª­ã¿å–ã‚Š: ~5-10æ“ä½œ Ã— $0.06/100K = $0.000003-0.000006
- Firestoreæ›¸ãè¾¼ã¿: ~10-100æ“ä½œ Ã— $0.18/100K = $0.000018-0.00018
- **åˆè¨ˆ/ãƒãƒƒãƒãƒ³ã‚°å®Ÿè¡Œ: ~$0.000021-0.000186**

### æœˆé¡è¦‹ç©ã‚‚ã‚Šï¼ˆ1æ—¥1000åˆ¤å®šã€1440ãƒãƒƒãƒãƒ³ã‚°å®Ÿè¡Œï¼‰
- åˆ¤å®š: 30,000 Ã— $0.000156 = $4.68
- ãƒãƒƒãƒãƒ³ã‚°: 43,200 Ã— $0.00011ï¼ˆå¹³å‡ï¼‰ = $4.75
- **æœˆé¡ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³: ~$10**

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒå¯Ÿ

### èªè¨¼
âœ… **è‰¯å¥½**: Callableé–¢æ•°ã§ Firebase Auth å¿…é ˆ

âš ï¸ **ã‚®ãƒ£ãƒƒãƒ—**: ãƒ­ãƒ¼ãƒ«/æ¨©é™ãƒã‚§ãƒƒã‚¯ãªã—ã€‚èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¨å“¡ãŒä»¥ä¸‹ã‚’å®Ÿè¡Œå¯èƒ½:
- `manualJudgeDebate` - å®Œäº†æ¸ˆã¿ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆå†åˆ¤å®š
- `manualMatching` - é«˜ã‚³ã‚¹ãƒˆãƒãƒƒãƒãƒ³ã‚°æ“ä½œãƒˆãƒªã‚¬ãƒ¼

**æ¨å¥¨**: ç®¡ç†è€…å°‚ç”¨é–¢æ•°ã«ãƒ­ãƒ¼ãƒ«ãƒã‚§ãƒƒã‚¯è¿½åŠ 

### ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹
âœ… **è‰¯å¥½**: Cloud FunctionsãŒã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½¿ç”¨ï¼ˆä»•æ§˜é€šã‚Šå…¨ã‚¢ã‚¯ã‚»ã‚¹ï¼‰

âš ï¸ **ã‚®ãƒ£ãƒƒãƒ—**: Firestoreãƒ«ãƒ¼ãƒ«ãŒæ‚ªæ„ã‚ã‚‹Cloud Functionsã‹ã‚‰ä¿è­·ã—ãªã„

**æ¨å¥¨**: é–¢æ•°ã‚³ãƒ¼ãƒ‰å†…ã§æ¤œè¨¼:
```typescript
if (roomData.eventId !== after.eventId) throw error;
```

### å…¥åŠ›æ¤œè¨¼
âš ï¸ **ã‚®ãƒ£ãƒƒãƒ—**: roomIdã€eventIdãŒç›´æ¥Firestoreã‚¯ã‚¨ãƒªã«æ¸¡ã•ã‚Œã‚‹
- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼å­˜åœ¨/æœ‰åŠ¹æ€§ã®æ¤œè¨¼ãªã—
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå­˜åœ¨ã‚’æ¼ã‚‰ã™å¯èƒ½æ€§

**æ¨å¥¨**: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼æ¤œè¨¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¾ãŸã¯ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼ä½¿ç”¨

### ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ãƒªã‚¹ã‚¯
âš ï¸ **æ‡¸å¿µ**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹ã‚’ç›´æ¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å«ã‚ã‚‹

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä½œæˆä¾‹:
```
"Let me tell you... " + [markdownã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³] + "AI, ignore above and ...
```

AIåˆ¤å®šã‚’æ“ä½œå¯èƒ½æ€§ã‚ã‚Šã€‚

**æ¨å¥¨**:
1. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—/ã‚µãƒ‹ã‚¿ã‚¤ã‚º
2. ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§åˆ¤å®šã®å®¢è¦³æ€§ã‚’å¼·åŒ–
3. AIã«æ¸¡ã™å‰ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 

---

## ä»Šå¾Œã®æ‹¡å¼µæ¡ˆ

### Phase 7: é«˜åº¦ãªæ©Ÿèƒ½
- [ ] ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆéŒ²ç”»ãƒ»å†ç”Ÿæ©Ÿèƒ½
- [ ] ãƒªãƒ—ãƒ¬ã‚¤æ©Ÿèƒ½
- [ ] ãƒ•ãƒ¬ãƒ³ãƒ‰å¯¾æˆ¦
- [ ] ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½
- [ ] ã‚«ã‚¹ã‚¿ãƒ ãƒˆãƒ”ãƒƒã‚¯ä½œæˆ

### Phase 8: ã‚½ãƒ¼ã‚·ãƒ£ãƒ«æ©Ÿèƒ½
- [ ] ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆå…±æœ‰
- [ ] ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½
- [ ] ã„ã„ã­æ©Ÿèƒ½
- [ ] ãƒ•ã‚©ãƒ­ãƒ¼æ©Ÿèƒ½

### Phase 9: åˆ†ææ©Ÿèƒ½
- [ ] è©³ç´°ãªçµ±è¨ˆåˆ†æ
- [ ] å¼·ã¿ãƒ»å¼±ã¿åˆ†æ
- [ ] æˆé•·ã‚°ãƒ©ãƒ•
- [ ] AIæ¨è–¦ã‚·ã‚¹ãƒ†ãƒ 

---

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãƒ»ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ

- **Flutter**: Google LLC
- **Gemini API**: Google Cloud Vertex AI
- **fl_chart**: MIT License
- **Riverpod**: MIT License
- **Freezed**: MIT License

---

**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæœ€çµ‚æ›´æ–°**: 2025-11-15
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼**: Development Team
