# å ±å‘Šæ©Ÿèƒ½ (Report Feature) - è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¨å„ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²](#ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¨å„ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²)
3. [ä¾å­˜é–¢ä¿‚å›³](#ä¾å­˜é–¢ä¿‚å›³)
4. [ã‚¯ãƒ©ã‚¹å›³ã¨é–¢ä¿‚æ€§](#ã‚¯ãƒ©ã‚¹å›³ã¨é–¢ä¿‚æ€§)
5. [ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°](#ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°)
6. [ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã¨å‡¦ç†ã®æµã‚Œ](#ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã¨å‡¦ç†ã®æµã‚Œ)
7. [ä»–ã®featureã¨ã®é€£æº](#ä»–ã®featureã¨ã®é€£æº)
8. [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)
9. [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
10. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³](#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³)
11. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## æ¦‚è¦

ã“ã®å ±å‘Šæ©Ÿèƒ½ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä¸é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å ±å‘Šã™ã‚‹ãŸã‚ã®ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®å¥å…¨æ€§ã‚’ä¿ã¤ãŸã‚ã®é‡è¦ãªæ©Ÿèƒ½ã¨ã—ã¦ã€æ„è¦‹æŠ•ç¨¿ã‚„ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¯¾ã™ã‚‹å ±å‘Šã‚’å—ã‘ä»˜ã‘ã¾ã™ã€‚

### æä¾›æ©Ÿèƒ½

- âœ… ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å ±å‘Šï¼ˆæ„è¦‹æŠ•ç¨¿ãƒ»ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰
- âœ… å ±å‘Šç†ç”±ã®åˆ†é¡ï¼ˆã‚¹ãƒ‘ãƒ ã€ä¸é©åˆ‡ã€ãƒãƒ©ã‚¹ãƒ¡ãƒ³ãƒˆã€ãƒ˜ã‚¤ãƒˆã‚¹ãƒ”ãƒ¼ãƒã€æš´åŠ›çš„è¡¨ç¾ã€ãã®ä»–ï¼‰
- âœ… è©³ç´°èª¬æ˜ã®ä»»æ„å…¥åŠ›ï¼ˆæœ€å¤§500æ–‡å­—ï¼‰
- âœ… é‡è¤‡å ±å‘Šã®é˜²æ­¢ãƒã‚§ãƒƒã‚¯
- âœ… å ±å‘Šå±¥æ­´ã®ç®¡ç†ï¼ˆç®¡ç†è€…ç”¨ï¼‰
- âœ… å ±å‘Šå¯¾å¿œçŠ¶æ…‹ã®ç®¡ç†ï¼ˆæœªå¯¾å¿œãƒ»å¯¾å¿œæ¸ˆã¿ï¼‰

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³

- **ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: Presentation â†’ Provider â†’ Repository â†’ Service
- **çŠ¶æ…‹ç®¡ç†**: Riverpodï¼ˆAsyncNotifierProviderï¼‰
- **ä¸å¤‰æ€§**: Freezed
- **ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–**: Cloud Firestore

---

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¨å„ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²

```
lib/feature/report/
â”‚
â”œâ”€â”€ models/                                    # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å±¤
â”‚   â”œâ”€â”€ report.dart                            # å ±å‘Šãƒ¢ãƒ‡ãƒ«ï¼ˆFreezedï¼‰
â”‚   â”‚   â”œâ”€ ReportType enum                     #    â†’ å ±å‘Šå¯¾è±¡ã®ç¨®é¡
â”‚   â”‚   â”‚   â”œâ”€ opinion                         #       â†’ æ„è¦‹æŠ•ç¨¿
â”‚   â”‚   â”‚   â””â”€ debateMessage                   #       â†’ ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€ ReportReason enum                   #    â†’ å ±å‘Šç†ç”±
â”‚   â”‚   â”‚   â”œâ”€ spam                            #       â†’ ã‚¹ãƒ‘ãƒ 
â”‚   â”‚   â”‚   â”œâ”€ inappropriate                   #       â†’ ä¸é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„
â”‚   â”‚   â”‚   â”œâ”€ harassment                      #       â†’ ãƒãƒ©ã‚¹ãƒ¡ãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€ hateSpeech                      #       â†’ ãƒ˜ã‚¤ãƒˆã‚¹ãƒ”ãƒ¼ãƒ
â”‚   â”‚   â”‚   â”œâ”€ violence                        #       â†’ æš´åŠ›çš„ãªè¡¨ç¾
â”‚   â”‚   â”‚   â””â”€ other                           #       â†’ ãã®ä»–
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€ Report class                        #    â†’ å ±å‘Šãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â”‚       â”œâ”€ id                              #       â†’ å ±å‘ŠIDï¼ˆUUIDï¼‰
â”‚   â”‚       â”œâ”€ reporterId                      #       â†’ å ±å‘Šè€…ã®UID
â”‚   â”‚       â”œâ”€ reportedUserId                  #       â†’ å ±å‘Šã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®UID
â”‚   â”‚       â”œâ”€ type                            #       â†’ å ±å‘Šã®ç¨®é¡
â”‚   â”‚       â”œâ”€ contentId                       #       â†’ å ±å‘Šã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ID
â”‚   â”‚       â”œâ”€ reason                          #       â†’ å ±å‘Šç†ç”±
â”‚   â”‚       â”œâ”€ details                         #       â†’ è©³ç´°èª¬æ˜ï¼ˆä»»æ„ï¼‰
â”‚   â”‚       â”œâ”€ createdAt                       #       â†’ å ±å‘Šæ—¥æ™‚
â”‚   â”‚       â”œâ”€ isResolved                      #       â†’ å¯¾å¿œæ¸ˆã¿ãƒ•ãƒ©ã‚°
â”‚   â”‚       â”œâ”€ resolvedAt                      #       â†’ å¯¾å¿œæ—¥æ™‚
â”‚   â”‚       â””â”€ resolvedBy                      #       â†’ å¯¾å¿œã—ãŸç®¡ç†è€…ã®UID
â”‚   â”‚
â”‚   â”œâ”€â”€ report.freezed.dart                    # Freezedè‡ªå‹•ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ report.g.dart                          # JSON ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³
â”‚
â”œâ”€â”€ providers/                                 # çŠ¶æ…‹ç®¡ç†å±¤ï¼ˆRiverpodï¼‰
â”‚   â””â”€â”€ report_providers.dart                  # ğŸ”‘ å ±å‘Šæ©Ÿèƒ½ã®Provider
â”‚       â”œâ”€ reportRepositoryProvider            #    â†’ ReportRepositoryã®DI
â”‚       â”‚   â””â”€ ReportRepository()              #       â†’ ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹æä¾›
â”‚       â”‚
â”‚       â”œâ”€ ReportNotifier                      #    â†’ å ±å‘Šé€ä¿¡ã®çŠ¶æ…‹ç®¡ç†
â”‚       â”‚   â””â”€ submitReport()                  #       â†’ å ±å‘Šã‚’é€ä¿¡
â”‚       â”‚
â”‚       â””â”€ reportNotifierProvider              #    â†’ ReportNotifierã®Provider
â”‚           â””â”€ AsyncValue<void>                #       â†’ éåŒæœŸå‡¦ç†ã®çŠ¶æ…‹
â”‚
â”œâ”€â”€ repositories/                              # ãƒªãƒã‚¸ãƒˆãƒªå±¤ï¼ˆãƒ‡ãƒ¼ã‚¿æ“ä½œï¼‰
â”‚   â””â”€â”€ report_repository.dart                 # ğŸ”‘ å ±å‘Šãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–
â”‚       â”œâ”€ _firestore                          #    â†’ FirebaseFirestore ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
â”‚       â”œâ”€ _auth                               #    â†’ FirebaseAuth ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
â”‚       â”‚
â”‚       â”œâ”€ createReport()                      #    â†’ å ±å‘Šã‚’ä½œæˆ
â”‚       â”‚   â””â”€ reports ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ä¿å­˜
â”‚       â”‚
â”‚       â”œâ”€ hasReported()                       #    â†’ æ—¢ã«å ±å‘Šæ¸ˆã¿ã‹ãƒã‚§ãƒƒã‚¯
â”‚       â”‚   â””â”€ é‡è¤‡å ±å‘Šã®é˜²æ­¢
â”‚       â”‚
â”‚       â”œâ”€ getReports()                        #    â†’ å ±å‘Šä¸€è¦§ã‚’å–å¾—ï¼ˆç®¡ç†è€…ç”¨ï¼‰
â”‚       â”‚   â””â”€ isResolved ãƒ•ã‚£ãƒ«ã‚¿å¯¾å¿œ
â”‚       â”‚
â”‚       â””â”€ resolveReport()                     #    â†’ å ±å‘Šã‚’å¯¾å¿œæ¸ˆã¿ã«ã™ã‚‹ï¼ˆç®¡ç†è€…ç”¨ï¼‰
â”‚           â””â”€ isResolved, resolvedAt, resolvedBy ã‚’æ›´æ–°
â”‚
â”œâ”€â”€ presentation/                              # ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼ˆUIï¼‰
â”‚   â””â”€â”€ widgets/
â”‚       â””â”€â”€ report_dialog.dart                 # ğŸ”‘ å ±å‘Šãƒ€ã‚¤ã‚¢ãƒ­ã‚°
â”‚           â”œâ”€ ReportDialog (ConsumerStatefulWidget)
â”‚           â”‚   â”œâ”€ reportedUserId              #    â†’ å ±å‘Šå¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®UID
â”‚           â”‚   â”œâ”€ type                        #    â†’ å ±å‘Šã®ç¨®é¡
â”‚           â”‚   â””â”€ contentId                   #    â†’ å ±å‘Šå¯¾è±¡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ID
â”‚           â”‚
â”‚           â””â”€ _ReportDialogState
â”‚               â”œâ”€ _selectedReason             #    â†’ é¸æŠã•ã‚ŒãŸå ±å‘Šç†ç”±
â”‚               â”œâ”€ _detailsController          #    â†’ è©³ç´°èª¬æ˜ã®ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼
â”‚               â”œâ”€ _getReasonText()            #    â†’ å ±å‘Šç†ç”±ã®æ—¥æœ¬èªå¤‰æ›
â”‚               â””â”€ _submitReport()             #    â†’ å ±å‘Šã‚’é€ä¿¡
â”‚
â””â”€â”€ README.md                                  # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

---

## ä¾å­˜é–¢ä¿‚å›³

### ãƒ•ã‚¡ã‚¤ãƒ«é–“ã®importä¾å­˜é–¢ä¿‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Presentation Layer                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  report_dialog.dart                                                  â”‚
â”‚  â”œâ”€â”€ import: models/report.dart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”œâ”€â”€ import: providers/report_providers.dart â”€â”€â”€â”¤                  â”‚
â”‚  â””â”€â”€ showDialog() ã§å¤–éƒ¨ã‹ã‚‰å‘¼ã³å‡ºã—             â”‚                  â”‚
â”‚                                                  â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Provider Layer           â–¼                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  report_providers.dart â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”œâ”€â”€ import: repositories/report_repository.dart â”€â”€â”€â”€â”¤             â”‚
â”‚  â”œâ”€â”€ import: models/report.dart                      â”‚             â”‚
â”‚  â”‚                                                    â”‚             â”‚
â”‚  â”œâ”€ reportRepositoryProvider                         â”‚             â”‚
â”‚  â”‚   â””â”€ ReportRepository() ã‚’æä¾›                    â”‚             â”‚
â”‚  â”‚                                                    â”‚             â”‚
â”‚  â”œâ”€ ReportNotifier                                   â”‚             â”‚
â”‚  â”‚   â””â”€ submitReport()                               â”‚             â”‚
â”‚  â”‚       â””â”€ repository.createReport() ã‚’å‘¼ã³å‡ºã—      â”‚             â”‚
â”‚  â”‚                                                    â”‚             â”‚
â”‚  â””â”€ reportNotifierProvider                           â”‚             â”‚
â”‚      â””â”€ AsyncNotifierProvider<ReportNotifier, void>  â”‚             â”‚
â”‚                                                       â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Repository Layer                â–¼             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  report_repository.dart â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚  â”œâ”€â”€ import: cloud_firestore                                        â”‚
â”‚  â”œâ”€â”€ import: firebase_auth                                          â”‚
â”‚  â”œâ”€â”€ import: models/report.dart                                     â”‚
â”‚  â”œâ”€â”€ import: package:uuid/uuid.dart                                 â”‚
â”‚  â”‚                                                                   â”‚
â”‚  â””â”€ ReportRepository                                                â”‚
â”‚      â”œâ”€ createReport()                                              â”‚
â”‚      â”‚   â””â”€ Firestore: reports/{reportId}.set()                     â”‚
â”‚      â”‚                                                               â”‚
â”‚      â”œâ”€ hasReported()                                               â”‚
â”‚      â”‚   â””â”€ Firestore: ã‚¯ã‚¨ãƒªã§é‡è¤‡ãƒã‚§ãƒƒã‚¯                          â”‚
â”‚      â”‚                                                               â”‚
â”‚      â”œâ”€ getReports()                                                â”‚
â”‚      â”‚   â””â”€ Firestore: reports ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰å–å¾—                  â”‚
â”‚      â”‚                                                               â”‚
â”‚      â””â”€ resolveReport()                                             â”‚
â”‚          â””â”€ Firestore: reports/{reportId}.update()                  â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        External Services                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  Firebase Authentication  â”‚  Cloud Firestore                        â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Provideré–“ã®ä¾å­˜é–¢ä¿‚

```
reportNotifierProvider
    â†“ depends on
reportRepositoryProvider
    â†“ provides
ReportRepository
    â†“ uses
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               â”‚               â”‚
FirebaseFirestore  FirebaseAuth  Uuid
```

---

## ã‚¯ãƒ©ã‚¹å›³ã¨é–¢ä¿‚æ€§

### ä¸»è¦ã‚¯ãƒ©ã‚¹ã®é–¢ä¿‚å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            UI Layer                                  â”‚
â”‚  (ä»–ã®featureã‹ã‚‰å‘¼ã³å‡ºã—)                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ showDialog()
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ReportDialog (ConsumerStatefulWidget)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  - reportedUserId: String                             â”‚  â”‚
â”‚  â”‚  - type: ReportType                                   â”‚  â”‚
â”‚  â”‚  - contentId: String                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  + build()                                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  + _submitReport()                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  + _getReasonText()                              â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ uses
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ReportNotifier (AsyncNotifier<void>)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  - state: AsyncValue<void>                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  + submitReport()                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    - reportedUserId                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    - type                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    - contentId                                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    - reason                                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    - details?                                  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ uses
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ReportRepository                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  - _firestore: FirebaseFirestore                    â”‚  â”‚
â”‚  â”‚  - _auth: FirebaseAuth                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  + createReport()                              â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    â†’ reports/{reportId}ã«ä¿å­˜                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  + hasReported()                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    â†’ é‡è¤‡ãƒã‚§ãƒƒã‚¯                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  + getReports()                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    â†’ ç®¡ç†è€…ç”¨ï¼šå ±å‘Šä¸€è¦§å–å¾—                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  + resolveReport()                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    â†’ ç®¡ç†è€…ç”¨ï¼šå¯¾å¿œæ¸ˆã¿ã«ã™ã‚‹                   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Reportãƒ¢ãƒ‡ãƒ«ã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

```dart
@freezed
class Report with _$Report {
  const factory Report({
    required String id,              // å ±å‘ŠIDï¼ˆUUIDï¼‰
    required String reporterId,      // å ±å‘Šè€…ã®UID
    required String reportedUserId,  // å ±å‘Šã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®UID
    required ReportType type,        // å ±å‘Šã®ç¨®é¡
    required String contentId,       // å ±å‘Šã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ID
    required ReportReason reason,    // å ±å‘Šç†ç”±
    String? details,                 // è©³ç´°èª¬æ˜ï¼ˆä»»æ„ã€æœ€å¤§500æ–‡å­—ï¼‰
    required DateTime createdAt,     // å ±å‘Šæ—¥æ™‚
    @Default(false) bool isResolved, // å¯¾å¿œæ¸ˆã¿ãƒ•ãƒ©ã‚°
    DateTime? resolvedAt,            // å¯¾å¿œæ—¥æ™‚
    String? resolvedBy,              // å¯¾å¿œã—ãŸç®¡ç†è€…ã®UID
  }) = _Report;

  factory Report.fromJson(Map<String, dynamic> json) =>
    _$ReportFromJson(json);
}

// å ±å‘Šå¯¾è±¡ã®ç¨®é¡
enum ReportType {
  opinion,        // æ„è¦‹æŠ•ç¨¿
  debateMessage,  // ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
}

// å ±å‘Šç†ç”±
enum ReportReason {
  spam,           // ã‚¹ãƒ‘ãƒ 
  inappropriate,  // ä¸é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„
  harassment,     // ãƒãƒ©ã‚¹ãƒ¡ãƒ³ãƒˆ
  hateSpeech,     // ãƒ˜ã‚¤ãƒˆã‚¹ãƒ”ãƒ¼ãƒ
  violence,       // æš´åŠ›çš„ãªè¡¨ç¾
  other,          // ãã®ä»–
}
```

### Firestoreãƒ‡ãƒ¼ã‚¿æ§‹é€ 

```
reports / {reportId}
  â”œâ”€ id: string (UUID)
  â”œâ”€ reporterId: string (å ±å‘Šè€…ã®UID)
  â”œâ”€ reportedUserId: string (å ±å‘Šã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®UID)
  â”œâ”€ type: string ('opinion' | 'debateMessage')
  â”œâ”€ contentId: string (æ„è¦‹IDã¾ãŸã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID)
  â”œâ”€ reason: string ('spam' | 'inappropriate' | 'harassment' | 'hateSpeech' | 'violence' | 'other')
  â”œâ”€ details: string? (è©³ç´°èª¬æ˜ã€ä»»æ„)
  â”œâ”€ createdAt: Timestamp
  â”œâ”€ isResolved: bool (default: false)
  â”œâ”€ resolvedAt: Timestamp? (å¯¾å¿œæ—¥æ™‚)
  â””â”€ resolvedBy: string? (å¯¾å¿œã—ãŸç®¡ç†è€…ã®UID)

ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ¨å¥¨:
  - reporterId (å ±å‘Šè€…ã®å ±å‘Šå±¥æ­´æ¤œç´¢ç”¨)
  - reportedUserId (ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®å ±å‘Šä¸€è¦§)
  - contentId (ç‰¹å®šã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®å ±å‘Š)
  - isResolved (æœªå¯¾å¿œå ±å‘Šã®æŠ½å‡º)
  - createdAt (æ™‚ç³»åˆ—ã‚½ãƒ¼ãƒˆ)
```

---

## ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°

### 1. ReportDialogï¼ˆå ±å‘Šãƒ€ã‚¤ã‚¢ãƒ­ã‚°UIï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `presentation/widgets/report_dialog.dart`

**å½¹å‰²**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä¸é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å ±å‘Šã™ã‚‹ãŸã‚ã®ãƒ€ã‚¤ã‚¢ãƒ­ã‚°UI

**è¡¨ç¤ºå†…å®¹**:
- å ±å‘Šç†ç”±ã®é¸æŠï¼ˆãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ï¼‰
- è©³ç´°èª¬æ˜ã®å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆä»»æ„ã€æœ€å¤§500æ–‡å­—ï¼‰
- ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»å ±å‘Šãƒœã‚¿ãƒ³

**ä½¿ç”¨æ–¹æ³•**:

```dart
// æ„è¦‹æŠ•ç¨¿ã‚’å ±å‘Šã™ã‚‹å ´åˆ
showDialog(
  context: context,
  builder: (context) => ReportDialog(
    reportedUserId: opinion.userId,
    type: ReportType.opinion,
    contentId: opinion.id,
  ),
);

// ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å ±å‘Šã™ã‚‹å ´åˆ
showDialog(
  context: context,
  builder: (context) => ReportDialog(
    reportedUserId: message.senderId,
    type: ReportType.debateMessage,
    contentId: message.id,
  ),
);
```

**çŠ¶æ…‹ç®¡ç†**:

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | å‹ | èª¬æ˜ |
|-----------|-----|------|
| `_selectedReason` | `ReportReason?` | é¸æŠã•ã‚ŒãŸå ±å‘Šç†ç”± |
| `_detailsController` | `TextEditingController` | è©³ç´°èª¬æ˜ã®å…¥åŠ›ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ |

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰**:

| ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
|---------|------|
| `_getReasonText(ReportReason)` | å ±å‘Šç†ç”±ã®enumã‚’æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ› |
| `_submitReport()` | å ±å‘Šã‚’é€ä¿¡ã—ã¦ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’é–‰ã˜ã‚‹ |

---

### 2. ReportNotifierï¼ˆå ±å‘Šé€ä¿¡ã®çŠ¶æ…‹ç®¡ç†ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `providers/report_providers.dart`

**å½¹å‰²**: å ±å‘Šé€ä¿¡ã®éåŒæœŸå‡¦ç†ã¨çŠ¶æ…‹ç®¡ç†

**çŠ¶æ…‹**: `AsyncValue<void>`
- `AsyncValue.data(null)`: åˆæœŸçŠ¶æ…‹ãƒ»é€ä¿¡æˆåŠŸ
- `AsyncValue.loading()`: é€ä¿¡ä¸­
- `AsyncValue.error(error)`: é€ä¿¡ã‚¨ãƒ©ãƒ¼

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰**:

```dart
Future<void> submitReport({
  required String reportedUserId,
  required ReportType type,
  required String contentId,
  required ReportReason reason,
  String? details,
}) async {
  state = const AsyncValue.loading();
  state = await AsyncValue.guard(() async {
    final repository = ref.read(reportRepositoryProvider);
    await repository.createReport(
      reportedUserId: reportedUserId,
      type: type,
      contentId: contentId,
      reason: reason,
      details: details,
    );
  });
}
```

**ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
- `AsyncValue.guard()` ã‚’ä½¿ç”¨ã—ã¦ä¾‹å¤–ã‚’è‡ªå‹•çš„ã«ã‚­ãƒ£ãƒƒãƒ
- UIã§ `state.hasError` ã¨ `state.error` ã‚’ç›£è¦–ã—ã¦ã‚¨ãƒ©ãƒ¼è¡¨ç¤º

---

### 3. ReportRepositoryï¼ˆå ±å‘Šãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `repositories/report_repository.dart`

**å½¹å‰²**: Firestoreã¸ã®å ±å‘Šãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ãƒ»å–å¾—ãƒ»æ›´æ–°

**ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**:
- `cloud_firestore`: Cloud Firestore
- `firebase_auth`: Firebase Authentication
- `uuid`: UUIDã®ç”Ÿæˆ

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰**:

#### createReport()

```dart
Future<void> createReport({
  required String reportedUserId,
  required ReportType type,
  required String contentId,
  required ReportReason reason,
  String? details,
}) async {
  final currentUser = _auth.currentUser;
  if (currentUser == null) {
    throw Exception('ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™');
  }

  final reportId = const Uuid().v4();
  final report = Report(
    id: reportId,
    reporterId: currentUser.uid,
    reportedUserId: reportedUserId,
    type: type,
    contentId: contentId,
    reason: reason,
    details: details,
    createdAt: DateTime.now(),
  );

  await _firestore.collection('reports').doc(reportId).set(report.toJson());
}
```

#### hasReported()

```dart
Future<bool> hasReported({
  required String contentId,
}) async {
  final currentUser = _auth.currentUser;
  if (currentUser == null) {
    return false;
  }

  final snapshot = await _firestore
      .collection('reports')
      .where('reporterId', isEqualTo: currentUser.uid)
      .where('contentId', isEqualTo: contentId)
      .limit(1)
      .get();

  return snapshot.docs.isNotEmpty;
}
```

**ç”¨é€”**: åŒã˜ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«å¯¾ã™ã‚‹é‡è¤‡å ±å‘Šã‚’é˜²æ­¢

#### getReports()ï¼ˆç®¡ç†è€…ç”¨ï¼‰

```dart
Future<List<Report>> getReports({
  bool? isResolved,
  int limit = 50,
}) async {
  Query query = _firestore
      .collection('reports')
      .orderBy('createdAt', descending: true);

  if (isResolved != null) {
    query = query.where('isResolved', isEqualTo: isResolved);
  }

  final snapshot = await query.limit(limit).get();

  return snapshot.docs
      .map((doc) => Report.fromJson(doc.data() as Map<String, dynamic>))
      .toList();
}
```

**ç”¨é€”**: ç®¡ç†è€…ãŒå ±å‘Šä¸€è¦§ã‚’ç¢ºèªã™ã‚‹éš›ã«ä½¿ç”¨

#### resolveReport()ï¼ˆç®¡ç†è€…ç”¨ï¼‰

```dart
Future<void> resolveReport(String reportId) async {
  final currentUser = _auth.currentUser;
  if (currentUser == null) {
    throw Exception('ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™');
  }

  await _firestore.collection('reports').doc(reportId).update({
    'isResolved': true,
    'resolvedAt': FieldValue.serverTimestamp(),
    'resolvedBy': currentUser.uid,
  });
}
```

**ç”¨é€”**: ç®¡ç†è€…ãŒå ±å‘Šã‚’ç¢ºèªã—ã¦å¯¾å¿œæ¸ˆã¿ã«ã™ã‚‹

---

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã¨å‡¦ç†ã®æµã‚Œ

### å ±å‘Šé€ä¿¡ãƒ•ãƒ­ãƒ¼ã®è©³ç´°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [1] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä¸é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç™ºè¦‹                           â”‚
â”‚     - æ„è¦‹æŠ•ç¨¿ã‚„ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã€Œå ±å‘Šã€ãƒœã‚¿ãƒ³ãŒè¡¨ç¤º         â”‚
â”‚     - è‡ªåˆ†ã®æŠ•ç¨¿ã«ã¯è¡¨ç¤ºã•ã‚Œãªã„                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [2] å ±å‘Šãƒœã‚¿ãƒ³æŠ¼ä¸‹                                                 â”‚
â”‚     home/presentation/pages/home_answer.dartï¼ˆä¾‹ï¼‰                â”‚
â”‚     â†“                                                             â”‚
â”‚     showDialog(                                                   â”‚
â”‚       builder: (context) => ReportDialog(                         â”‚
â”‚         reportedUserId: opinion.userId,                           â”‚
â”‚         type: ReportType.opinion,                                 â”‚
â”‚         contentId: opinion.id,                                    â”‚
â”‚       ),                                                          â”‚
â”‚     );                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [3] ReportDialogè¡¨ç¤º                                              â”‚
â”‚     presentation/widgets/report_dialog.dart                       â”‚
â”‚     â†“                                                             â”‚
â”‚     ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›:                                                â”‚
â”‚     - å ±å‘Šç†ç”±ã‚’é¸æŠï¼ˆå¿…é ˆï¼‰                                       â”‚
â”‚       â—‹ ã‚¹ãƒ‘ãƒ                                                     â”‚
â”‚       â—‹ ä¸é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„                                         â”‚
â”‚       â—‹ ãƒãƒ©ã‚¹ãƒ¡ãƒ³ãƒˆ                                              â”‚
â”‚       â—‹ ãƒ˜ã‚¤ãƒˆã‚¹ãƒ”ãƒ¼ãƒ                                            â”‚
â”‚       â—‹ æš´åŠ›çš„ãªè¡¨ç¾                                              â”‚
â”‚       â—‹ ãã®ä»–                                                    â”‚
â”‚     - è©³ç´°èª¬æ˜ã‚’å…¥åŠ›ï¼ˆä»»æ„ã€æœ€å¤§500æ–‡å­—ï¼‰                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [4] ã€Œå ±å‘Šã™ã‚‹ã€ãƒœã‚¿ãƒ³æŠ¼ä¸‹                                         â”‚
â”‚     _ReportDialogState._submitReport()                            â”‚
â”‚     â†“                                                             â”‚
â”‚     ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³:                                                â”‚
â”‚     - å ±å‘Šç†ç”±ãŒé¸æŠã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [5] ReportNotifier.submitReport()                                 â”‚
â”‚     providers/report_providers.dart                               â”‚
â”‚     â†“                                                             â”‚
â”‚     state = AsyncValue.loading()  // çŠ¶æ…‹ã‚’ã€Œå‡¦ç†ä¸­ã€ã«            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [6] ReportRepository.createReport()                               â”‚
â”‚     repositories/report_repository.dart                           â”‚
â”‚     â†“                                                             â”‚
â”‚     1. ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—ï¼ˆFirebase Authenticationï¼‰                â”‚
â”‚        if (currentUser == null) throw Exception('ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦')  â”‚
â”‚                                                                   â”‚
â”‚     2. UUIDç”Ÿæˆ                                                   â”‚
â”‚        final reportId = Uuid().v4()                               â”‚
â”‚                                                                   â”‚
â”‚     3. Reportã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ                                      â”‚
â”‚        Report(                                                    â”‚
â”‚          id: reportId,                                            â”‚
â”‚          reporterId: currentUser.uid,                             â”‚
â”‚          reportedUserId: reportedUserId,                          â”‚
â”‚          type: type,                                              â”‚
â”‚          contentId: contentId,                                    â”‚
â”‚          reason: reason,                                          â”‚
â”‚          details: details,                                        â”‚
â”‚          createdAt: DateTime.now(),                               â”‚
â”‚          isResolved: false,                                       â”‚
â”‚        )                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [7] Firestoreã«ä¿å­˜                                               â”‚
â”‚     â†“                                                             â”‚
â”‚     await _firestore                                              â”‚
â”‚       .collection('reports')                                      â”‚
â”‚       .doc(reportId)                                              â”‚
â”‚       .set(report.toJson());                                      â”‚
â”‚     // â†’ reports/{reportId}ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [8] çŠ¶æ…‹ã‚’æ›´æ–°                                                     â”‚
â”‚     ReportNotifier                                                â”‚
â”‚     â†“                                                             â”‚
â”‚     state = AsyncValue.data(null)  // æˆåŠŸ                        â”‚
â”‚     ã¾ãŸã¯                                                        â”‚
â”‚     state = AsyncValue.error(error)  // ã‚¨ãƒ©ãƒ¼                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [9] UIã§çŠ¶æ…‹å¤‰åŒ–ã‚’æ¤œçŸ¥                                             â”‚
â”‚     report_dialog.dart                                            â”‚
â”‚     â†“                                                             â”‚
â”‚     final state = ref.read(reportNotifierProvider);               â”‚
â”‚     if (state.hasError) {                                         â”‚
â”‚       ScaffoldMessenger.of(context).showSnackBar(                 â”‚
â”‚         SnackBar(content: Text('å ±å‘Šã«å¤±æ•—ã—ã¾ã—ãŸ')),             â”‚
â”‚       );                                                          â”‚
â”‚     } else {                                                      â”‚
â”‚       Navigator.of(context).pop();  // ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’é–‰ã˜ã‚‹           â”‚
â”‚       ScaffoldMessenger.of(context).showSnackBar(                 â”‚
â”‚         SnackBar(content: Text('å ±å‘Šã‚’é€ä¿¡ã—ã¾ã—ãŸ')),             â”‚
â”‚       );                                                          â”‚
â”‚     }                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é‡è¤‡å ±å‘Šãƒã‚§ãƒƒã‚¯ãƒ•ãƒ­ãƒ¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [1] å ±å‘Šãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹å‰ã«ãƒã‚§ãƒƒã‚¯ï¼ˆæ¨å¥¨å®Ÿè£…ï¼‰                     â”‚
â”‚     â†“                                                             â”‚
â”‚     final hasReported = await ref.read(                           â”‚
â”‚       reportRepositoryProvider                                    â”‚
â”‚     ).hasReported(contentId: opinion.id);                         â”‚
â”‚                                                                   â”‚
â”‚     if (hasReported) {                                            â”‚
â”‚       // ã€Œå ±å‘Šæ¸ˆã¿ã€ã¨è¡¨ç¤ºã€ã¾ãŸã¯ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤º                    â”‚
â”‚     }                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä»–ã®featureã¨ã®é€£æº

### 1. home featureï¼ˆæ„è¦‹æŠ•ç¨¿ï¼‰ã¨ã®é€£æº

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/feature/home/presentation/pages/home_answer.dart`

**é€£æºæ–¹æ³•**:

```dart
import 'package:tyarekyara/feature/report/presentation/widgets/report_dialog.dart';
import 'package:tyarekyara/feature/report/models/report.dart';

class OpinionCard extends ConsumerWidget {
  final Opinion opinion;

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final currentUser = ref.watch(currentUserProvider).value;
    final isMyOpinion = currentUser?.id == opinion.userId;

    return Card(
      child: Column(
        children: [
          // æ„è¦‹ã®å†…å®¹è¡¨ç¤º
          Text(opinion.content),

          // å ±å‘Šãƒœã‚¿ãƒ³ï¼ˆè‡ªåˆ†ã®æŠ•ç¨¿ä»¥å¤–ï¼‰
          if (!isMyOpinion && currentUser != null)
            InkWell(
              onTap: () => _showReportDialog(context, ref),
              child: Row(
                children: [
                  Icon(Icons.flag_outlined),
                  Text('å ±å‘Š'),
                ],
              ),
            ),
        ],
      ),
    );
  }

  void _showReportDialog(BuildContext context, WidgetRef ref) {
    showDialog(
      context: context,
      builder: (context) => ReportDialog(
        reportedUserId: opinion.userId,
        type: ReportType.opinion,
        contentId: opinion.id,
      ),
    );
  }
}
```

**é€£æºãƒã‚¤ãƒ³ãƒˆ**:
- æ„è¦‹æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰ã«ã€Œå ±å‘Šã€ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
- è‡ªåˆ†ã®æŠ•ç¨¿ã«ã¯å ±å‘Šãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã—ãªã„
- ã‚²ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯å ±å‘Šãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã—ãªã„ï¼ˆcurrentUser == nullï¼‰

---

### 2. debate featureï¼ˆãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰ã¨ã®é€£æº

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/feature/debate/presentation/pages/debate_room_page.dart`ï¼ˆæƒ³å®šï¼‰

**é€£æºæ–¹æ³•**:

```dart
import 'package:tyarekyara/feature/report/presentation/widgets/report_dialog.dart';
import 'package:tyarekyara/feature/report/models/report.dart';

class DebateMessageCard extends ConsumerWidget {
  final DebateMessage message;

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final currentUser = ref.watch(currentUserProvider).value;
    final isMyMessage = currentUser?.id == message.senderId;

    return Card(
      child: Column(
        children: [
          // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å†…å®¹è¡¨ç¤º
          Text(message.content),

          // å ±å‘Šãƒœã‚¿ãƒ³ï¼ˆè‡ªåˆ†ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä»¥å¤–ï¼‰
          if (!isMyMessage && currentUser != null)
            IconButton(
              icon: Icon(Icons.flag_outlined),
              onPressed: () {
                showDialog(
                  context: context,
                  builder: (context) => ReportDialog(
                    reportedUserId: message.senderId,
                    type: ReportType.debateMessage,
                    contentId: message.id,
                  ),
                );
              },
            ),
        ],
      ),
    );
  }
}
```

**é€£æºãƒã‚¤ãƒ³ãƒˆ**:
- ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã€Œå ±å‘Šã€ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
- è‡ªåˆ†ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã¯å ±å‘Šãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã—ãªã„
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆä¸­ã§ã‚‚å ±å‘Šå¯èƒ½

---

### 3. admin featureï¼ˆç®¡ç†è€…ç”»é¢ï¼‰ã¨ã®é€£æºï¼ˆå°†æ¥å®Ÿè£…ï¼‰

**æƒ³å®šãƒ•ã‚¡ã‚¤ãƒ«**: `lib/feature/admin/presentation/pages/report_management_page.dart`

**é€£æºæ–¹æ³•**:

```dart
import 'package:tyarekyara/feature/report/providers/report_providers.dart';
import 'package:tyarekyara/feature/report/models/report.dart';

class ReportManagementPage extends ConsumerWidget {
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return FutureBuilder<List<Report>>(
      future: ref.read(reportRepositoryProvider).getReports(
        isResolved: false, // æœªå¯¾å¿œã®ã¿
        limit: 100,
      ),
      builder: (context, snapshot) {
        if (snapshot.hasData) {
          final reports = snapshot.data!;
          return ListView.builder(
            itemCount: reports.length,
            itemBuilder: (context, index) {
              final report = reports[index];
              return ReportCard(
                report: report,
                onResolve: () async {
                  await ref.read(reportRepositoryProvider)
                      .resolveReport(report.id);
                  // ãƒªã‚¹ãƒˆå†èª­ã¿è¾¼ã¿
                },
              );
            },
          );
        }
        return CircularProgressIndicator();
      },
    );
  }
}
```

**ç®¡ç†æ©Ÿèƒ½**:
- æœªå¯¾å¿œå ±å‘Šã®ä¸€è¦§è¡¨ç¤º
- å ±å‘Šã®è©³ç´°ç¢ºèª
- å¯¾å¿œæ¸ˆã¿ã«ã™ã‚‹æ©Ÿèƒ½
- å ±å‘Šã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ç¢ºèªãƒ»å‰Šé™¤
- å ±å‘Šã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¢ºèªãƒ»åˆ¶é™

---

### 4. block feature ã¨ã®é€£æºï¼ˆå°†æ¥å®Ÿè£…ï¼‰

**é€£æºãƒã‚¤ãƒ³ãƒˆ**:
- å ±å‘Šæ™‚ã«ã€Œã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã¾ã™ã‹ï¼Ÿã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
- å ±å‘Šã¨ãƒ–ãƒ­ãƒƒã‚¯ã‚’åŒæ™‚ã«å®Ÿè¡Œå¯èƒ½
- ãƒ–ãƒ­ãƒƒã‚¯ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯è‡ªå‹•çš„ã«éè¡¨ç¤º

---

## ä½¿ç”¨æ–¹æ³•

### 1. åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•ï¼ˆæ„è¦‹æŠ•ç¨¿ã‚’å ±å‘Šï¼‰

```dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:tyarekyara/feature/report/presentation/widgets/report_dialog.dart';
import 'package:tyarekyara/feature/report/models/report.dart';

class OpinionDetailPage extends ConsumerWidget {
  final Opinion opinion;

  const OpinionDetailPage({required this.opinion});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return Scaffold(
      appBar: AppBar(
        title: Text('æ„è¦‹è©³ç´°'),
        actions: [
          IconButton(
            icon: Icon(Icons.flag_outlined),
            onPressed: () {
              showDialog(
                context: context,
                builder: (context) => ReportDialog(
                  reportedUserId: opinion.userId,
                  type: ReportType.opinion,
                  contentId: opinion.id,
                ),
              );
            },
          ),
        ],
      ),
      body: Text(opinion.content),
    );
  }
}
```

---

### 2. é‡è¤‡å ±å‘Šã®ãƒã‚§ãƒƒã‚¯

```dart
class OpinionCard extends ConsumerWidget {
  final Opinion opinion;

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return FutureBuilder<bool>(
      future: ref.read(reportRepositoryProvider).hasReported(
        contentId: opinion.id,
      ),
      builder: (context, snapshot) {
        final hasReported = snapshot.data ?? false;

        return Card(
          child: Column(
            children: [
              Text(opinion.content),

              // å ±å‘Šãƒœã‚¿ãƒ³
              if (!hasReported)
                TextButton.icon(
                  icon: Icon(Icons.flag_outlined),
                  label: Text('å ±å‘Š'),
                  onPressed: () {
                    showDialog(
                      context: context,
                      builder: (context) => ReportDialog(
                        reportedUserId: opinion.userId,
                        type: ReportType.opinion,
                        contentId: opinion.id,
                      ),
                    );
                  },
                )
              else
                Text('å ±å‘Šæ¸ˆã¿', style: TextStyle(color: Colors.grey)),
            ],
          ),
        );
      },
    );
  }
}
```

---

### 3. ç®¡ç†è€…ç”¨ï¼šå ±å‘Šä¸€è¦§ã®å–å¾—

```dart
class AdminReportListPage extends ConsumerWidget {
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return Scaffold(
      appBar: AppBar(title: Text('å ±å‘Šç®¡ç†')),
      body: FutureBuilder<List<Report>>(
        future: ref.read(reportRepositoryProvider).getReports(
          isResolved: false, // æœªå¯¾å¿œã®ã¿
          limit: 50,
        ),
        builder: (context, snapshot) {
          if (snapshot.connectionState == ConnectionState.waiting) {
            return Center(child: CircularProgressIndicator());
          }

          if (snapshot.hasError) {
            return Center(child: Text('ã‚¨ãƒ©ãƒ¼: ${snapshot.error}'));
          }

          final reports = snapshot.data ?? [];

          if (reports.isEmpty) {
            return Center(child: Text('æœªå¯¾å¿œã®å ±å‘Šã¯ã‚ã‚Šã¾ã›ã‚“'));
          }

          return ListView.builder(
            itemCount: reports.length,
            itemBuilder: (context, index) {
              final report = reports[index];
              return ListTile(
                title: Text('å ±å‘Šç†ç”±: ${report.reason}'),
                subtitle: Text('å ±å‘Šæ—¥æ™‚: ${report.createdAt}'),
                trailing: ElevatedButton(
                  onPressed: () async {
                    await ref.read(reportRepositoryProvider)
                        .resolveReport(report.id);
                    // ãƒªã‚¹ãƒˆã‚’å†èª­ã¿è¾¼ã¿
                  },
                  child: Text('å¯¾å¿œæ¸ˆã¿ã«ã™ã‚‹'),
                ),
                onTap: () {
                  // å ±å‘Šè©³ç´°ç”»é¢ã¸é·ç§»
                },
              );
            },
          );
        },
      ),
    );
  }
}
```

---

### 4. ç®¡ç†è€…ç”¨ï¼šå ±å‘Šã‚’å¯¾å¿œæ¸ˆã¿ã«ã™ã‚‹

```dart
Future<void> resolveReport(WidgetRef ref, String reportId) async {
  try {
    await ref.read(reportRepositoryProvider).resolveReport(reportId);
    print('å ±å‘Šã‚’å¯¾å¿œæ¸ˆã¿ã«ã—ã¾ã—ãŸ');
  } catch (e) {
    print('ã‚¨ãƒ©ãƒ¼: $e');
  }
}
```

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|-----------|----------|------|
| `cloud_firestore` | ^4.x.x | Cloud Firestore |
| `firebase_auth` | ^4.x.x | Firebase Authentication |
| `flutter_riverpod` | ^2.x.x | çŠ¶æ…‹ç®¡ç† |
| `freezed` | ^2.x.x | ä¸å¤‰ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ |
| `freezed_annotation` | ^2.x.x | Freezedã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ |
| `json_annotation` | ^4.x.x | JSONã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ |
| `uuid` | ^4.x.x | UUIDã®ç”Ÿæˆ |

### é–‹ç™ºæ™‚ã®ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | ç”¨é€” |
|-----------|------|
| `build_runner` | ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ |
| `freezed` | Freezedã‚³ãƒ¼ãƒ‰ç”Ÿæˆ |
| `json_serializable` | JSONç”Ÿæˆ |

### ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚³ãƒãƒ³ãƒ‰

```bash
# Freezed + JSONç”Ÿæˆ
flutter pub run build_runner build --delete-conflicting-outputs

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
flutter pub run build_runner watch --delete-conflicting-outputs
```

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### Firestore Security Rules

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // å ±å‘Šã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
    match /reports/{reportId} {
      // èª­ã¿å–ã‚Š: ç®¡ç†è€…ã®ã¿ï¼ˆã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ ä½¿ç”¨ï¼‰
      allow read: if request.auth != null
                  && request.auth.token.admin == true;

      // ä½œæˆ: èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ï¼ˆè‡ªåˆ†ã®UIDãŒä¸€è‡´ï¼‰
      allow create: if request.auth != null
                    && request.resource.data.reporterId == request.auth.uid
                    && request.resource.data.isResolved == false;

      // æ›´æ–°: ç®¡ç†è€…ã®ã¿ï¼ˆå¯¾å¿œæ¸ˆã¿ã«ã™ã‚‹æ“ä½œï¼‰
      allow update: if request.auth != null
                    && request.auth.token.admin == true
                    && request.resource.data.diff(resource.data).affectedKeys()
                       .hasOnly(['isResolved', 'resolvedAt', 'resolvedBy']);

      // å‰Šé™¤: ç¦æ­¢ï¼ˆå ±å‘Šã¯å‰Šé™¤ã›ãšä¿æŒï¼‰
      allow delete: if false;
    }
  }
}
```

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- âœ… å ±å‘Šè€…ã®UIDè‡ªå‹•å–å¾—ï¼ˆãªã‚Šã™ã¾ã—é˜²æ­¢ï¼‰
- âœ… å ±å‘Šæ—¥æ™‚ã¯ã‚µãƒ¼ãƒãƒ¼å´ã§è‡ªå‹•è¨­å®š
- âœ… ç®¡ç†è€…ã®ã¿ãŒå ±å‘Šä¸€è¦§ã‚’é–²è¦§å¯èƒ½
- âœ… å ±å‘Šã®å‰Šé™¤ã¯ç¦æ­¢ï¼ˆç›£æŸ»ãƒ­ã‚°ã¨ã—ã¦ä¿æŒï¼‰
- âœ… é‡è¤‡å ±å‘Šã®ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½
- âœ… ã‚²ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å ±å‘Šä¸å¯
- âœ… è©³ç´°èª¬æ˜ã¯æœ€å¤§500æ–‡å­—ã«åˆ¶é™

### ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

#### å ±å‘Šç†ç”±ã¨å¯¾å¿œæ–¹é‡

| å ±å‘Šç†ç”± | å¯¾å¿œæ–¹é‡ | å„ªå…ˆåº¦ |
|---------|---------|--------|
| ã‚¹ãƒ‘ãƒ  | ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‰Šé™¤ã€ç¹°ã‚Šè¿”ã™å ´åˆã¯ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåœæ­¢ | é«˜ |
| ä¸é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ | å†…å®¹ç¢ºèªå¾Œã€å‰Šé™¤ã¾ãŸã¯è­¦å‘Š | ä¸­ |
| ãƒãƒ©ã‚¹ãƒ¡ãƒ³ãƒˆ | å³åº§ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‰Šé™¤ã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè­¦å‘Š | é«˜ |
| ãƒ˜ã‚¤ãƒˆã‚¹ãƒ”ãƒ¼ãƒ | å³åº§ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‰Šé™¤ã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåœæ­¢æ¤œè¨ | æœ€é«˜ |
| æš´åŠ›çš„ãªè¡¨ç¾ | å†…å®¹ç¢ºèªå¾Œã€å‰Šé™¤ã¾ãŸã¯ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåœæ­¢ | é«˜ |
| ãã®ä»– | å€‹åˆ¥ã«åˆ¤æ–­ | ä½ã€œä¸­ |

#### å¯¾å¿œãƒ•ãƒ­ãƒ¼

1. **å ±å‘Šå—ä¿¡**
   - Firestore: `reports` ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ä¿å­˜
   - ç®¡ç†è€…ã«é€šçŸ¥ï¼ˆCloud FunctionsçµŒç”±ã€å°†æ¥å®Ÿè£…ï¼‰

2. **å†…å®¹ç¢ºèª**
   - å ±å‘Šã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç¢ºèª
   - `contentId` ã‹ã‚‰è©²å½“ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å–å¾—
   - `reportedUserId` ã‹ã‚‰å ±å‘Šã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å±¥æ­´ã‚’ç¢ºèª

3. **å¯¾å¿œåˆ¤æ–­**
   - ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³é•åã®ç¨‹åº¦ã‚’è©•ä¾¡
   - è­¦å‘Šãƒ»å‰Šé™¤ãƒ»ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåœæ­¢ã‚’åˆ¤æ–­

4. **å¯¾å¿œå®Ÿæ–½**
   - ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å‰Šé™¤ï¼ˆ`isDeleted: true` ã«ã™ã‚‹ï¼‰
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®è­¦å‘Šé€šçŸ¥
   - ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåœæ­¢ï¼ˆé‡å¤§ãªé•åã®å ´åˆï¼‰

5. **å ±å‘Šã‚’å¯¾å¿œæ¸ˆã¿ã«ã™ã‚‹**
   - `resolveReport()` ã‚’å®Ÿè¡Œ
   - `isResolved: true`, `resolvedAt`, `resolvedBy` ã‚’æ›´æ–°

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### 1. å ±å‘ŠãŒé€ä¿¡ã§ããªã„

**åŸå› **: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæœªèªè¨¼

**è§£æ±ºç­–**:
```dart
// å ±å‘Šãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹å‰ã«èªè¨¼ãƒã‚§ãƒƒã‚¯
final currentUser = ref.watch(currentUserProvider).value;
if (currentUser != null) {
  // å ±å‘Šãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
}
```

---

### 2. å ±å‘Šãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œãªã„

**åŸå› **: showDialog() ã®å‘¼ã³å‡ºã—ãƒŸã‚¹

**è§£æ±ºç­–**:
```dart
// æ­£ã—ã„å‘¼ã³å‡ºã—æ–¹
showDialog(
  context: context,
  builder: (context) => ReportDialog(
    reportedUserId: userId,
    type: ReportType.opinion,
    contentId: contentId,
  ),
);
```

---

### 3. Freezedãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œãªã„

**åŸå› **: `build_runner` ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ãªã„

**è§£æ±ºç­–**:
```bash
flutter pub run build_runner build --delete-conflicting-outputs
```

---

### 4. Firestoreã«ä¿å­˜ã•ã‚Œãªã„

**åŸå› **: Security RulesãŒå³ã—ã™ãã‚‹

**è§£æ±ºç­–**: Firebaseã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ä»¥ä¸‹ã‚’ç¢ºèª
1. Security RulesãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹
2. `reporterId == request.auth.uid` ã®æ¡ä»¶ã‚’ç¢ºèª
3. ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã§ä¸€æ™‚çš„ã«ãƒ«ãƒ¼ãƒ«ã‚’ç·©å’Œã—ã¦ç¢ºèª

---

### 5. ç®¡ç†è€…ãŒå ±å‘Šä¸€è¦§ã‚’å–å¾—ã§ããªã„

**åŸå› **: ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ ï¼ˆadminï¼‰ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„

**è§£æ±ºç­–**: Firebase Admin SDKã‚’ä½¿ç”¨ã—ã¦ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ ã‚’è¨­å®š
```javascript
// Cloud Functions ã¾ãŸã¯ Admin SDK
admin.auth().setCustomUserClaims(uid, { admin: true });
```

---

### 6. é‡è¤‡å ±å‘Šãƒã‚§ãƒƒã‚¯ãŒæ©Ÿèƒ½ã—ãªã„

**åŸå› **: Firestoreã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒä½œæˆã•ã‚Œã¦ã„ãªã„

**è§£æ±ºç­–**: Firebaseã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ä»¥ä¸‹ã®è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½œæˆ
- ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³: `reports`
- ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰: `reporterId` (Ascending), `contentId` (Ascending)

---

## ã¾ã¨ã‚

ã“ã®å ±å‘Šæ©Ÿèƒ½ã¯ã€ä»¥ä¸‹ã®ç‰¹å¾´ã‚’æŒã¤ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã§ã™ï¼š

âœ… **ã‚·ãƒ³ãƒ—ãƒ«ãªUI**: ç›´æ„Ÿçš„ãªå ±å‘Šãƒ€ã‚¤ã‚¢ãƒ­ã‚°
âœ… **æŸ”è»Ÿãªå ±å‘Šç†ç”±**: 6ç¨®é¡ã®å ±å‘Šç†ç”±ã‚’æä¾›
âœ… **é‡è¤‡é˜²æ­¢**: åŒã˜ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®é‡è¤‡å ±å‘Šã‚’ãƒã‚§ãƒƒã‚¯
âœ… **ã‚»ã‚­ãƒ¥ã‚¢**: Firestore Security Rulesã«ã‚ˆã‚‹ä¿è­·
âœ… **æ‹¡å¼µæ€§**: æ–°ã—ã„å ±å‘Šã‚¿ã‚¤ãƒ—ã®è¿½åŠ ãŒå®¹æ˜“
âœ… **ç›£æŸ»å¯èƒ½**: ã™ã¹ã¦ã®å ±å‘Šã‚’æ°¸ç¶šåŒ–ã—ã¦ä¿æŒ
âœ… **ç®¡ç†è€…æ©Ÿèƒ½**: å ±å‘Šä¸€è¦§ã®å–å¾—ã¨å¯¾å¿œçŠ¶æ…‹ã®ç®¡ç†

### å°†æ¥ã®æ‹¡å¼µäºˆå®š

- ğŸ”œ Cloud Functionsã«ã‚ˆã‚‹ç®¡ç†è€…ã¸ã®è‡ªå‹•é€šçŸ¥
- ğŸ”œ AI/MLã‚’ä½¿ã£ãŸè‡ªå‹•ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- ğŸ”œ å ±å‘Šã®çµ±è¨ˆãƒ»åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- ğŸ”œ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®è­¦å‘Šé€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
- ğŸ”œ å ±å‘Šã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è‡ªå‹•éè¡¨ç¤º
- ğŸ”œ ãƒ–ãƒ­ãƒƒã‚¯æ©Ÿèƒ½ã¨ã®çµ±åˆ

### é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- Firebase Security Rules: Firebaseã‚³ãƒ³ã‚½ãƒ¼ãƒ«
- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³: ï¼ˆåˆ¥é€”ä½œæˆäºˆå®šï¼‰

### å‚è€ƒãƒªãƒ³ã‚¯

- [Cloud Firestore - Flutter](https://firebase.google.com/docs/firestore/quickstart?hl=ja#flutter)
- [Firebase Authentication - Flutter](https://firebase.google.com/docs/auth/flutter/start)
- [Riverpod](https://riverpod.dev/)
- [Freezed](https://pub.dev/packages/freezed)

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´1æœˆ
**ãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼**: é–‹ç™ºãƒãƒ¼ãƒ 
